<!DOCTYPE html>
<html lang="en"><head>
<script src="3_loading_and_cleaning_files/libs/clipboard/clipboard.min.js"></script>
<script src="3_loading_and_cleaning_files/libs/quarto-html/tabby.min.js"></script>
<script src="3_loading_and_cleaning_files/libs/quarto-html/popper.min.js"></script>
<script src="3_loading_and_cleaning_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="3_loading_and_cleaning_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="3_loading_and_cleaning_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="3_loading_and_cleaning_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="3_loading_and_cleaning_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<link href="3_loading_and_cleaning_files/libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="3_loading_and_cleaning_files/libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.4.549">

  <meta name="dcterms.date" content="2024-02-07">
  <title>Loading &amp; Cleaning Data in R</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="3_loading_and_cleaning_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="3_loading_and_cleaning_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="3_loading_and_cleaning_files/libs/revealjs/dist/theme/quarto.css">
  <link href="3_loading_and_cleaning_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="3_loading_and_cleaning_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="3_loading_and_cleaning_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="3_loading_and_cleaning_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-image="figures/dataset.png" data-background-position="95% 50%" data-background-size="40%" class="center">

    <p class="absolute" style="top:0">Workshop: Dealing with Data in R</p>
  
  
  <h1 class="title" style="padding-top: 150px;">Loading &amp; Cleaning Data in R</h1>
    <h3 class="subtitle" style="padding-top:5px;"><strong>I know the file exists, why doesn’t R?</strong></h3>
  
    <p style="font-size:70%; padding-top: 120px">
    <i class="fa-brands fa-github"></i> <a href="https://github.com/steffilazerte">steffilazerte</a><br>
    <i class="fa-brands fa-mastodon"></i> <a href="https://fosstodon.org/@steffilazerte">@steffilazerte@fosstodon.org</a><br>
    <i class="fa-brands fa-twitter"></i> <a href="https://twitter.com/steffilazerte">@steffilazerte</a><br>
    <i class="fa-solid fa-globe"></i> <a href="https://steffilazerte.ca">steffilazerte.ca</a><br>
    <img src="figures/steffi_logo.png" width="30%">
  </p>
  
  
  
    <p class="date">Compiled: 2024-02-07</p>
  </section>
<section id="first-things-first" class="title-slide slide level1 center">
<h1>First things first</h1>
<div style="text-align:left; padding: 15px 200px 15px 200px">
<p><i class="fa-solid fa-floppy-disk" aria-label="floppy-disk"></i> Save previous script</p>
<p><i class="fa-solid fa-folder-open" aria-label="folder-open"></i> Open New File <br> <span class="small hang">(make sure you’re in the RStudio Project)</span></p>
<p><i class="fa-solid fa-pen" aria-label="pen"></i> Write <code>library(tidyverse)</code> at the top</p>
<p><i class="fa-solid fa-floppy-disk" aria-label="floppy-disk"></i> Save this new script <br> <span class="small hang">(consider names like <code>cleaning.R</code> or <code>3_loading_and_cleaning.R</code>)</span></p>
</div>
</section>

<section>
<section id="side-note" class="title-slide slide level1 center">
<h1>Side Note</h1>
<p><em>R base vs.&nbsp;<code>tidyverse</code></em></p>
</section>
<section id="r-base-vs.-tidyverse" class="slide level2">
<h2>R base vs.&nbsp;<code>tidyverse</code></h2>
<h3 id="r-base">R base</h3>
<ul>
<li>Basic R</li>
<li>Packages are installed and loaded by default</li>
<li>Base pipe <code>|&gt;</code> *</li>
</ul>
<p><img data-src="figures/logo_r.png" class="absolute" style="top: 10%; right: 20%; width: 20%; " alt="RStudio blue ball logo"></p>
<p><span class="footnote">*We’ll cover pipes soon 😁</span></p>
<div class="fragment">
<!-- -->
<h3 id="tidyverse"><code>tidyverse</code></h3>
<ul>
<li>Collection of ‘new’ packages developed by a team closely affiliated with RStudio
<ul>
<li>e.g., <code>ggplot2</code>, <code>dplyr</code>, <code>tidyr</code>, <code>readr</code></li>
<li>Packages designed to work well together</li>
</ul></li>
<li>Use a slightly different syntax</li>
<li>tidyverse pipe <code>%&gt;%</code> or base pipe <code>|&gt;</code> *</li>
</ul>
<p><img data-src="figures/hex_tidyverse.png" class="absolute" style="bottom: 0px; right: 40%; width: 15%; " alt="Hex logo for the tidyverse R package"></p>
</div>
<p><span class="fragment note absolute" style="left: 80%; bottom: 5%; width: 25%; ">Useful to know if functions are<br><strong><code>tidyverse</code></strong> or <strong>R base</strong></span></p>
</section>
<section id="dealing-with-data" class="slide level2">
<h2>Dealing with data</h2>
<div class="columns">
<div class="column" style="width:50%;">
<h3 id="loading-data">1. Loading data</h3>
<ul>
<li>Get your data into R</li>
</ul>
<h3 id="looking-for-problems">2. Looking for problems</h3>
<ul>
<li>Typos</li>
<li>Incorrectly loaded data</li>
</ul>
<h3 id="fixing-problems">3. Fixing problems</h3>
<ul>
<li>Corrections</li>
<li>Renaming</li>
</ul>
</div><div class="column" style="width:50%;">
<h3 id="setting-formats">4. Setting formats</h3>
<ul>
<li>Dates</li>
<li>Numbers</li>
<li>Factors</li>
</ul>
<h3 id="saving-your-data">5. Saving your data</h3>
</div>
</div>
</section></section>
<section>
<section id="loading-data-1" class="title-slide slide level1 center">
<h1>Loading Data</h1>

</section>
<section id="data-types-what-kind-of-data-do-you-have" class="slide level2">
<h2>Data types: What kind of data do you have?</h2>
<h3 id="specific-program-files">Specific program files</h3>
<div class="columns">
<div class="column" style="width:80%;">
<table>
<colgroup>
<col style="width: 25%">
<col style="width: 31%">
<col style="width: 20%">
<col style="width: 22%">
</colgroup>
<thead>
<tr class="header">
<th>Type</th>
<th>Extension</th>
<th>R Package</th>
<th>R function</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Excel</td>
<td>.xls, .xlsx</td>
<td><code>readxl</code>*</td>
<td><code>read_excel()</code></td>
</tr>
<tr class="even">
<td>Open Document</td>
<td>.ods</td>
<td><code>readODS</code></td>
<td><code>read_ods()</code></td>
</tr>
<tr class="odd">
<td>SPSS</td>
<td>.sav, .zsav, .por</td>
<td><code>haven</code></td>
<td><code>read_spss()</code></td>
</tr>
<tr class="even">
<td>SAS</td>
<td>.sas7bdat</td>
<td><code>haven</code></td>
<td><code>read_sas()</code></td>
</tr>
<tr class="odd">
<td>Stata</td>
<td>.dta</td>
<td><code>haven</code></td>
<td><code>read_dta()</code></td>
</tr>
<tr class="even">
<td>Database Files</td>
<td>.dbf</td>
<td><code>foreign</code></td>
<td><code>read.dbf()</code></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="fragment">
<!-- -->
<h3 id="convenient-but">Convenient but…</h3>
<ul>
<li>Can be unreliable</li>
<li>Can take longer</li>
</ul>
</div>
<p><span class="fragment note absolute" style="left: 60%; bottom: 0px; ">For files that don’t change, better to save as a <code>*.csv</code><br> (Comma-separated-variables file)</span></p>
<p><img data-src="figures/hex_readxl.png" class="absolute" style="top: 0px; right: 0px; width: 16%; " alt="Hex logo for the readxl R package"> <span class="footnote">* part of the <code>tidyverse</code></span></p>
</section>
<section id="data-types-what-kind-of-data-do-you-have-1" class="slide level2">
<h2>Data types: What kind of data do you have?</h2>
<h3 id="general-text-files">General text files</h3>
<table>
<thead>
<tr class="header">
<th>Type</th>
<th>R base</th>
<th><code>readr</code> package *</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Comma separated</td>
<td><code>read.csv()</code></td>
<td><code>read_csv()</code>, <code>read_csv2()</code></td>
</tr>
<tr class="even">
<td>Tab separated</td>
<td><code>read.delim()</code></td>
<td><code>read_tsv()</code></td>
</tr>
<tr class="odd">
<td>Space separated</td>
<td><code>read.table()</code></td>
<td><code>read_table()</code></td>
</tr>
<tr class="even">
<td>Fixed-width</td>
<td><code>read.fwf()</code></td>
<td><code>read_fwf()</code></td>
</tr>
</tbody>
</table>
<p><img data-src="figures/hex_readr.png" class="absolute" style="top: 0px; right: 0px; width: 16%; " alt="Hex logo for the readr R package"> <span class="footnote">* part of the <code>tidyverse</code></span></p>
<div class="fragment spacer">
<ul>
<li><strong><code>readr</code> package</strong> especially useful for big data sets (fast!)</li>
<li>Error/warnings from <code>readr</code> are a bit more helpful</li>
</ul>
</div>
<div class="fragment note absolute" style="bottom: -15%; width: 50%; ">
<p><span class="large"><strong>We’ll focus on</strong></span></p>
<ul>
<li><code>readxl</code> package <i class="fa-solid fa-arrow-right" aria-label="arrow-right"></i> <code>read_excel()</code><br>
</li>
<li><code>readr</code> package <i class="fa-solid fa-arrow-right" aria-label="arrow-right"></i> <code>read_csv()</code>, <code>read_tsv()</code><br>
</li>
</ul>
</div>
</section>
<section id="where-is-my-data" class="slide level2">
<h2>Where is my data?</h2>
<h3 id="common-error">Common error</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href=""></a>my_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"weather.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error: 'weather.csv' does not exist in current working directory ('/home/steffi/Projects/Workshops/workshop-dealing-with-data').</code></pre>
</div>
</div>
<p>With no folder (just file name) R expects file to be in <strong>Working directory</strong></p>
<div class="fragment spacer">
<!-- -->
<h3 id="working-directory-is">Working directory is:</h3>
<ul>
<li>Where your RStudio project is</li>
<li>Your home directory (My Documents, etc.) [If not using RStudio Projects]</li>
<li>Where you’ve set it (using <code>setwd()</code> or RStudio’s Session &gt; Set Working Directory)</li>
</ul>
</div>
<div class="fragment note absolute" style="bottom: -5%; width: 50%; ">
<p><strong>Don’t</strong> use <code>setwd()</code><br>
<strong>Do</strong> use Projects in RStudio</p>
</div>
</section>
<section id="where-is-my-data-1" class="slide level2">
<h2>Where is my data?</h2>
<h3 id="a-note-on-file-paths-file-locations">A note on file paths (file locations)</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href=""></a><span class="sc">/</span>home</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>folders separated by <code>/</code></li>
<li><code>home</code> is a folder</li>
</ul>
</section>
<section id="where-is-my-data-2" class="slide level2">
<h2>Where is my data?</h2>
<h3 id="a-note-on-file-paths-file-locations-1">A note on file paths (file locations)</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href=""></a><span class="sc">/</span>home<span class="sc">/</span>steffi<span class="sc">/</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>folders separated by <code>/</code></li>
<li><code>home</code> and <code>steffi</code> are folders</li>
<li><code>steffi</code> is a folder inside of <code>home</code></li>
</ul>
</section>
<section id="where-is-my-data-3" class="slide level2">
<h2>Where is my data?</h2>
<h3 id="a-note-on-file-paths-file-locations-2">A note on file paths (file locations)</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href=""></a><span class="sc">/</span>home<span class="sc">/</span>steffi<span class="sc">/</span>Documents<span class="sc">/</span>R Projects<span class="sc">/</span>mydata.csv</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>folders separated by <code>/</code></li>
<li><code>home</code>, <code>steffi</code>, <code>Documents</code>, <code>R Projects</code> are folders</li>
<li><code>steffi</code> is inside of <code>home</code>, <code>Documents</code> is inside of <code>steffi</code>, etc.</li>
<li><code>mydata.csv</code> is a data file inside <code>R Projects</code> folder</li>
</ul>

<img data-src="figures/file_viewer.png" style="width:40.0%" alt="Screenshot of RStudio file pane showing mydata.csv" class="r-stretch quarto-figure-center"><p class="caption">RStudio Files Pane</p></section>
<section id="where-is-my-data-4" class="slide level2">
<h2>Where is my data?</h2>
<h3 id="absolute-paths"><strong>Absolute</strong> Paths</h3>
<div class="small left">
<table>
<thead>
<tr class="header">
<th>OS</th>
<th>Path</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>LINUX</strong></td>
<td>/home/steffi/Documents/R Projects/mydata.csv</td>
</tr>
<tr class="even">
<td><strong>WINDOWS</strong></td>
<td>C:/Users/steffi/My Documents/R Projects/mydata.csv</td>
</tr>
<tr class="odd">
<td><strong>MAC</strong></td>
<td>/users/steffi/Documents/R Projects/mydata.csv</td>
</tr>
</tbody>
</table>
</div>
<div class="fragment note absolute" style="top: 28%; left: 75%; ">
<p>Full location, folders and filename</p>
</div>
<div class="fragment">
<!-- -->
<h3 class="spacer" id="relative-paths"><strong>Relative</strong> Paths</h3>
<div class="small left">
<table>
<colgroup>
<col style="width: 26%">
<col style="width: 73%">
</colgroup>
<thead>
<tr class="header">
<th>Path</th>
<th>Where to look</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>mydata.csv</td>
<td>Here (current directory)</td>
</tr>
<tr class="even">
<td>../mydata.csv</td>
<td>Go up one directory (../)</td>
</tr>
<tr class="odd">
<td>data/mydata.csv</td>
<td>Stay here, go into “data” folder (data/)</td>
</tr>
<tr class="even">
<td>../data/mydata.csv</td>
<td>Go up one directory (../), then into “data” folder (data/)</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="fragment note absolute" style="top: 65%; left: 75%; ">
<p>Only <em>relative</em> info<br>
Use relative symbols (e.g., <code>../</code>)</p>
</div>
<div class="note fragment absolute" style="left: 25%; bottom: -5%; ">
<p>With RStudio ‘Projects’ only need to use <strong>relative</strong> paths</p>
</div>
</section>
<section id="keep-yourself-organized" class="slide level2">
<h2>Keep yourself organized</h2>
<h3 id="for-simple-projects">For simple projects</h3>
<ul>
<li>Create an ‘RStudio Project’ for each Project (Chapter, Thesis, etc.)</li>
<li>Create a specific “data” folder within each project (one per project)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" data-code-line-numbers="1,3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href=""></a><span class="sc">-</span> Prospect Lake Quality                 <span class="co"># Project Folder</span></span>
<span id="cb6-2"><a href=""></a>    <span class="sc">-</span> prospect_analysis.R</span>
<span id="cb6-3"><a href=""></a>    <span class="sc">-</span> data                              <span class="co"># Data Folder   </span></span>
<span id="cb6-4"><a href=""></a>        <span class="sc">-</span> prospect_data_2017<span class="dv">-01</span><span class="fl">-01.</span>csv</span>
<span id="cb6-5"><a href=""></a>        <span class="sc">-</span> prospect_data_2017<span class="dv">-02</span><span class="fl">-01.</span>csv</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<ul>
<li>Use <strong>relative</strong> paths to refer to this folder</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href=""></a>d <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/prospect_data_2017-01-01.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section></section>
<section>
<section id="lets-load-some-data" class="title-slide slide level1 center">
<h1>Let’s Load Some Data!</h1>

</section>
<section id="your-turn-load-some-data" class="slide level2 space-list">
<h2>Your turn: Load some data</h2>
<div class="columns">
<div class="column" style="width:60%;">
<ol type="1">
<li><p>Create a ‘<strong>data</strong>’ folder in your RStudio project</p></li>
<li><p>Put <a href="https://steffilazerte.ca/workshop-dealing-with-data/data/rivers_correct.xlsx"><code>rivers_correct.xlsx</code></a> file in the “<strong>data</strong>” folder</p></li>
<li><p>Load the package</p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href=""></a><span class="fu">library</span>(readxl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="4" type="1">
<li>Read in the Excel file and assign to object <code>rivers</code></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href=""></a>rivers <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"data/rivers_correct.xlsx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="5" type="1">
<li><p>Use <code>head()</code> and <code>tail()</code> functions to look at the data<br>
<span class="hang small">e.g., <code>head(rivers)</code> and <code>tail(rivers)</code></span></p></li>
<li><p>Click on the <code>rivers</code> object in your “Environment” pane to look at the whole data set</p></li>
</ol>
</div><div class="column" style="width:40%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figures/files.png" alt="Screenshot of the file viewer pane in RStudio with &quot;New Folder&quot; circled in red"></p>
<figcaption>Click on “New Folder”</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figures/tip_file_nav.gif" alt="GIF showing the dropdown menu that appears when you hit the 'tab' key inside the quotes when typing file locations"></p>
<figcaption>Use the <em>‘tab’</em> key in RStudio when typing in the file name for auto-complete</figcaption>
</figure>
</div>
</div>
</div>
</section>

<section id="how-do-i-know-which-function-to-use" class="slide level2 space-list">
<h2>How do I know which function to use?</h2>
<h3 id="look-at-the-file-extension">Look at the file extension:</h3>
<ul>
<li><p><a href="https://steffilazerte.ca/workshop-dealing-with-data/data/rivers_correct.csv"><code>rivers_correct.csv</code></a></p></li>
<li><p><code>.csv</code> <i class="fa-solid fa-arrow-right" aria-label="arrow-right"></i> Comma-separated-variables <i class="fa-solid fa-arrow-right" aria-label="arrow-right"></i> <code>read_csv()</code></p></li>
</ul>
<p><span class="note fragment">But not always obvious…</span></p>
</section>
<section id="how-do-i-know-which-function-to-use-1" class="slide level2 space-list">
<h2>How do I know which function to use?</h2>
<h3 id="look-at-the-file-master_moch.txt">Look at the file: <a href="https://steffilazerte.ca/workshop-dealing-with-data/data/master_moch.txt"><code>master_moch.txt</code></a></h3>
<ul>
<li>Put this file in your <strong><code>data</code></strong> folder</li>
<li>In lower right-hand pane, click on <strong>Files</strong>
<ul>
<li>Click on <strong>data</strong> folder</li>
<li>Click on <strong>master_moch.txt</strong></li>
<li>Click “View File” <span class="small">(if asked)</span></li>
</ul></li>
</ul>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>ID  region  hab freq    freq.sd p.notes
MCB02   kam 0.5266879074    3.9806600009    3.9806600009    0.4592592593
MCB03   kam -0.9707703735   4.1090031783    4.1090031783    0.5
MCB04   kam -0.9707703735   4.2463067674    4.2463067674    0.5151515152</code></pre>
</div>
</div>
<p><span class="note absolute" style="bottom: 8%; ">This <strong>does not</strong> read the file into R, but only shows you the contents as text.</span></p>
<p><span class="note fragment absolute" style="bottom: -5%; width: 60%; ">Hmm, not comma-separated, maybe tab-separated?</span></p>
</section>
<section id="how-do-i-know-which-function-to-use-2" class="slide level2">
<h2>How do I know which function to use?</h2>
<h3 id="peak">Peak:</h3>
<ul>
<li>Pick a read function with your best guess (<code>read_csv()</code> is a good start)</li>
<li>Use <code>n_max</code> to read only first few rows</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href=""></a><span class="fu">read_csv</span>(<span class="st">"data/master_moch.txt"</span>, <span class="at">n_max =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 1
  `ID\tregion\thab\tfreq\tfreq.sd\tp.notes`                            
  &lt;chr&gt;                                                                
1 "MCB02\tkam\t0.5266879074\t3.9806600009\t3.9806600009\t0.4592592593" 
2 "MCB03\tkam\t-0.9707703735\t4.1090031783\t4.1090031783\t0.5"         
3 "MCB04\tkam\t-0.9707703735\t4.2463067674\t4.2463067674\t0.5151515152"</code></pre>
</div>
</div>
<div class="spacer">
<p><span class="note"><code>\t</code> means tab, so this is tab-separated data</span></p>
</div>
</section>
<section id="how-do-i-know-what-to-use" class="slide level2">
<h2>How do I know what to use?</h2>
<h3 id="peak-1">Peak:</h3>
<ul>
<li>Try again with <code>read_tsv()</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href=""></a><span class="fu">read_tsv</span>(<span class="st">"data/master_moch.txt"</span>, <span class="at">n_max =</span> <span class="dv">3</span>)  <span class="co"># note change in function!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 6
  ID    region    hab  freq freq.sd p.notes
  &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
1 MCB02 kam     0.527  3.98    3.98   0.459
2 MCB03 kam    -0.971  4.11    4.11   0.5  
3 MCB04 kam    -0.971  4.25    4.25   0.515</code></pre>
</div>
</div>
<div class="spacer">
<p><span class="note">Excellent!</span></p>
</div>
</section></section>
<section>
<section id="specifics-of-loading-functions" class="title-slide slide level1 center">
<h1>Specifics of loading functions</h1>

</section>
<section id="col_names" class="slide level2 space-list">
<h2><code>col_names</code></h2>
<ul>
<li><a href="https://steffilazerte.ca/workshop-dealing-with-data/data/geolocators.csv">Geolocator data</a></li>
</ul>
<p>
</p><div class="columns">
<div class="column" style="width:60%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href=""></a>my_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/geolocators.csv"</span>)</span>
<span id="cb20-2"><a href=""></a>my_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 20 × 2
   `02/05/11 22:29:59`  `64`
   &lt;chr&gt;               &lt;dbl&gt;
 1 02/05/11 22:31:59      64
 2 02/05/11 22:33:59      38
 3 02/05/11 22:35:59      38
 4 02/05/11 22:37:59      34
 5 02/05/11 22:39:59      30
 6 02/05/11 22:41:59      34
 7 02/05/11 22:43:59      40
 8 02/05/11 22:45:59      46
 9 02/05/11 22:47:59      48
10 02/05/11 22:49:59      46
# ℹ 10 more rows</code></pre>
</div>
</div>
<p>Oops?</p>
</div><div class="column fragment" style="width:40%;">
<ul>
<li><code>read_csv</code>, <code>read_tsv</code>, etc. assume that the first row contains the column names</li>
<li>This file doesn’t have headers</li>
</ul>
</div>
</div>
</section>
<section id="col_names-1" class="slide level2">
<h2><code>col_names</code></h2>
<ul>
<li><a href="https://steffilazerte.ca/workshop-dealing-with-data/data/geolocators.csv">Geolocator data</a></li>
</ul>
<p>
</p><div class="columns">
<div class="column" style="width:48%;">
<h3 id="declare-no-headings">Declare no headings</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb22" data-code-line-numbers="2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href=""></a>my_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/geolocators.csv"</span>, </span>
<span id="cb22-2"><a href=""></a>                    <span class="at">col_names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb22-3"><a href=""></a>my_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21 × 2
   X1                   X2
   &lt;chr&gt;             &lt;dbl&gt;
 1 02/05/11 22:29:59    64
 2 02/05/11 22:31:59    64
 3 02/05/11 22:33:59    38
 4 02/05/11 22:35:59    38
 5 02/05/11 22:37:59    34
 6 02/05/11 22:39:59    30
 7 02/05/11 22:41:59    34
 8 02/05/11 22:43:59    40
 9 02/05/11 22:45:59    46
10 02/05/11 22:47:59    48
# ℹ 11 more rows</code></pre>
</div>
</div>
</div><div class="column" style="width:52%;">
<div class="fragment">
<!-- -->
<h3 id="name-headings">Name headings</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb24" data-code-line-numbers="2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href=""></a>my_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/geolocators.csv"</span>, </span>
<span id="cb24-2"><a href=""></a>                    <span class="at">col_names =</span> <span class="fu">c</span>(<span class="st">"date"</span>, <span class="st">"light"</span>))</span>
<span id="cb24-3"><a href=""></a>my_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21 × 2
   date              light
   &lt;chr&gt;             &lt;dbl&gt;
 1 02/05/11 22:29:59    64
 2 02/05/11 22:31:59    64
 3 02/05/11 22:33:59    38
 4 02/05/11 22:35:59    38
 5 02/05/11 22:37:59    34
 6 02/05/11 22:39:59    30
 7 02/05/11 22:41:59    34
 8 02/05/11 22:43:59    40
 9 02/05/11 22:45:59    46
10 02/05/11 22:47:59    48
# ℹ 11 more rows</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="skip-info-rows-before-data" class="slide level2">
<h2><code>skip</code> info rows before data</h2>
<ul>
<li><a href="https://steffilazerte.ca/workshop-dealing-with-data/data/grain_size.txt">Grain size data</a></li>
</ul>
<div class="cell" data-highlight.output="[2,4,5,6]">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href=""></a>my_data <span class="ot">&lt;-</span> <span class="fu">read_tsv</span>(<span class="st">"data/grain_size.txt"</span>)</span>
<span id="cb26-2"><a href=""></a>my_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 36 × 7
   `DATA DOWNLOAD: 2015-09-23` ...2  ...3        ...4     ...5  ...6  ...7 
   &lt;chr&gt;                       &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
 1 SYSTEM 001                  &lt;NA&gt;  &lt;NA&gt;        &lt;NA&gt;     &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt; 
 2 LOGGER X                    &lt;NA&gt;  &lt;NA&gt;        &lt;NA&gt;     &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt; 
 3 lab_num                     CSP   sample_num  depth_lb csa   msa   fsa  
 4 3177                        CSP01 CSP01-P-1-1 4        13.04 17.37 8.19 
 5 3178                        CSP01 CSP01-P-1-2 12       10.74 16.9  7.92 
 6 3179                        CSP01 CSP01-P-1-3 35       12.11 17.75 6.99 
 7 3180                        CSP01 CSP01-P-1-4 53       17.61 18.16 6.29 
 8 3181                        CSP01 CSP01-P-1-5 83       21.05 18.38 6.26 
 9 3182                        CSP01 CSP01-P-1-6 105      19.02 18.43 6.28 
10 3183                        CSP08 CSP08-P-1-1 10       11.6  17.14 8.18 
# ℹ 26 more rows</code></pre>
</div>
</div>
</section>
<section id="skip-info-rows-before-data-1" class="slide level2">
<h2><code>skip</code> info rows before data</h2>
<ul>
<li><a href="https://steffilazerte.ca/workshop-dealing-with-data/data/grain_size.txt">Grain size data</a></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href=""></a>my_data <span class="ot">&lt;-</span> <span class="fu">read_tsv</span>(<span class="st">"data/grain_size.txt"</span>)</span>
<span id="cb28-2"><a href=""></a>my_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="columns">
<div class="column" style="width:30%;">
<p><strong>Look at the file:</strong></p>
<ul>
<li>Click on <strong>Files</strong> tab</li>
<li>Click on <strong>data</strong> folder</li>
<li>Click on <strong>grain_size.txt</strong></li>
<li>Click <strong>“View file”</strong> <span class="small">(if asked)</span></li>
</ul>
</div><div class="column fragment" style="width:60%;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>DATA DOWNLOAD: 2015-09-23                       
SYSTEM 001                      
LOGGER X                        
lab_num CSP sample_num  depth_lb    csa msa fsa
3177    CSP01   CSP01-P-1-1 4   13.04   17.37   8.19
3178    CSP01   CSP01-P-1-2 12  10.74   16.9    7.92
3179    CSP01   CSP01-P-1-3 35  12.11   17.75   6.99
3180    CSP01   CSP01-P-1-4 53  17.61   18.16   6.29
3181    CSP01   CSP01-P-1-5 83  21.05   18.38   6.26</code></pre>
</div>
</div>
</div>
</div>
<p><span class="note absolute fragment" style="left: 50%; bottom: 10%; "><strong>Ah ha!</strong><br>Metadata was stored at the top of the file</span></p>
</section>
<section id="skip-info-rows-before-data-2" class="slide level2">
<h2><code>skip</code> info rows before data</h2>
<ul>
<li><a href="https://steffilazerte.ca/workshop-dealing-with-data/data/grain_size.txt">Grain size data</a></li>
<li>Add <code>skip = 3</code> to skip the first three rows</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href=""></a>my_data <span class="ot">&lt;-</span> <span class="fu">read_tsv</span>(<span class="st">"data/grain_size.txt"</span>, <span class="at">skip =</span> <span class="dv">3</span>)</span>
<span id="cb30-2"><a href=""></a>my_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 33 × 7
   lab_num CSP   sample_num  depth_lb   csa   msa   fsa
     &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1    3177 CSP01 CSP01-P-1-1        4 13.0  17.4   8.19
 2    3178 CSP01 CSP01-P-1-2       12 10.7  16.9   7.92
 3    3179 CSP01 CSP01-P-1-3       35 12.1  17.8   6.99
 4    3180 CSP01 CSP01-P-1-4       53 17.6  18.2   6.29
 5    3181 CSP01 CSP01-P-1-5       83 21.0  18.4   6.26
 6    3182 CSP01 CSP01-P-1-6      105 19.0  18.4   6.28
 7    3183 CSP08 CSP08-P-1-1       10 11.6  17.1   8.18
 8    3184 CSP08 CSP08-P-1-2       27 15.4  16.2   6.76
 9    3185 CSP08 CSP08-P-1-3       90 14.9  15.8   7.12
10    3186 CSP02 CSP02-P-1-1        5  8.75  8.64  3.41
# ℹ 23 more rows</code></pre>
</div>
</div>
<p><span class="note absolute" style="left: 65%; bottom: 40%; ">Much better!</span></p>
</section>
<section id="your-turn-load-this-data-set" class="slide level2">
<h2>Your turn: Load this data set</h2>
<p>Load the telemetry data set: <a href="https://steffilazerte.ca/workshop-dealing-with-data/data/Sta%20A%20Data%202006-11-07.dmp"><code>Sta A Data 2006-11-07.dmp</code></a></p>
<ol type="1">
<li>Look at the file</li>
<li>Decide which R function to use based on delimiter <span class="small">(comma, space, or tab?)</span></li>
<li>Any other options need to be specified?</li>
</ol>
<h3 id="it-should-look-like-this">It should look like this:</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 19 × 7
  StartDate Time     Frequency `Rate/Temp`   Pwr Ant      SD
      &lt;dbl&gt; &lt;time&gt;       &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;
1     39022 17:15:36      150.        34.8   175 M0        0
2     39022 17:19:14      148.        19.2    72 M0        0
3     39022 17:19:25      148.        19.7   194 M1        0
4     39022 17:20:04      149.        33.8   104 M0        0
5     39022 17:20:17      149.        33.7   152 M1        0
6     39022 17:20:57      150.        34.2   188 M0        0
7     39022 17:22:50      148.         9.8   188 M0        0
# ℹ 12 more rows</code></pre>
</div>
</div>
<p><span class="note absolute" style="left: 80%; bottom: 17%; width: 40%; "><strong>Too Easy?</strong><br>Load some of your own tricky data</span> <span class="note absolute" style="left: 70%; bottom: -15%; width: 60%; "><strong>OR</strong><br>Try to load the second sheet of <code>rivers_correct.xlsx</code> and rename the columns in the same step<br><span class="small">(see <code>?read_excel</code>)</span></span></p>
</section>

</section>
<section>
<section id="looking-for-problems-1" class="title-slide slide level1 center">
<h1>Looking for problems</h1>

</section>
<section id="look-at-the-data" class="slide level2">
<h2>Look at the data</h2>
<ul>
<li>Make sure columns as expected <span class="small">(correctly assigned file format)</span></li>
<li>Make sure no extra lines above the data <span class="small">(should we have used a skip?)</span></li>
<li>Make sure column names look appropriate</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href=""></a><span class="fu">library</span>(palmerpenguins)</span>
<span id="cb39-2"><a href=""></a>penguins</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 8
   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g sex     year
   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt; &lt;fct&gt;  &lt;int&gt;
 1 Adelie  Torgersen           39.1          18.7               181        3750 male    2007
 2 Adelie  Torgersen           39.5          17.4               186        3800 female  2007
 3 Adelie  Torgersen           40.3          18                 195        3250 female  2007
 4 Adelie  Torgersen           NA            NA                  NA          NA &lt;NA&gt;    2007
 5 Adelie  Torgersen           36.7          19.3               193        3450 female  2007
 6 Adelie  Torgersen           39.3          20.6               190        3650 male    2007
 7 Adelie  Torgersen           38.9          17.8               181        3625 female  2007
 8 Adelie  Torgersen           39.2          19.6               195        4675 male    2007
 9 Adelie  Torgersen           34.1          18.1               193        3475 &lt;NA&gt;    2007
10 Adelie  Torgersen           42            20.2               190        4250 &lt;NA&gt;    2007
# ℹ 334 more rows</code></pre>
</div>
</div>
</section>
<section id="look-at-the-data-1" class="slide level2">
<h2>Look at the data</h2>
<ul>
<li>Did the whole data set load?</li>
<li>Are there extra blank lines at the end of the data?</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href=""></a><span class="fu">tail</span>(penguins)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 8
  species   island bill_length_mm bill_depth_mm flipper_length_mm body_mass_g sex     year
  &lt;fct&gt;     &lt;fct&gt;           &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt; &lt;fct&gt;  &lt;int&gt;
1 Chinstrap Dream            45.7          17                 195        3650 female  2009
2 Chinstrap Dream            55.8          19.8               207        4000 male    2009
3 Chinstrap Dream            43.5          18.1               202        3400 female  2009
4 Chinstrap Dream            49.6          18.2               193        3775 male    2009
5 Chinstrap Dream            50.8          19                 210        4100 male    2009
6 Chinstrap Dream            50.2          18.7               198        3775 female  2009</code></pre>
</div>
</div>
</section>
<section id="skim-the-data" class="slide level2">
<h2><code>skim()</code> the data</h2>
<h3 class="spacer" id="skim-is-from-skimr"><code>skim()</code> is from <code>skimr</code></h3>
<div class="columns">
<div class="column small space-list" style="width:25%;">
<ul>
<li>Are the formats correct?
<ul>
<li>numbers (<code>numeric</code>),</li>
<li>text (<code>character</code>)</li>
<li>date (<code>date</code>, <code>POSIXct</code>, <code>datetime</code>)</li>
<li>categories (<code>factor</code>)</li>
</ul></li>
<li>Are values appropriate?
<ul>
<li>Should there be <code>NA</code>s?</li>
</ul></li>
<li>Are there any typos?</li>
<li>Number of rows expected?</li>
</ul>
</div><div class="small column" style="width:75%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href=""></a><span class="fu">library</span>(skimr)</span>
<span id="cb43-2"><a href=""></a><span class="fu">skim</span>(penguins)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>── Data Summary ────────────────────────
                           Values  
Name                       penguins
Number of rows             344     
Number of columns          8       
_______________________            
Column type frequency:             
  factor                   3       
  numeric                  5       
________________________           
Group variables            None    

── Variable type: factor ───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  skim_variable n_missing complete_rate ordered n_unique top_counts                 
1 species               0         1     FALSE          3 Ade: 152, Gen: 124, Chi: 68
2 island                0         1     FALSE          3 Bis: 168, Dre: 124, Tor: 52
3 sex                  11         0.968 FALSE          2 mal: 168, fem: 165         

── Variable type: numeric ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  skim_variable     n_missing complete_rate   mean      sd     p0    p25    p50    p75   p100 hist 
1 bill_length_mm            2         0.994   43.9   5.46    32.1   39.2   44.4   48.5   59.6 ▃▇▇▆▁
2 bill_depth_mm             2         0.994   17.2   1.97    13.1   15.6   17.3   18.7   21.5 ▅▅▇▇▂
3 flipper_length_mm         2         0.994  201.   14.1    172    190    197    213    231   ▂▇▃▅▂
4 body_mass_g               2         0.994 4202.  802.    2700   3550   4050   4750   6300   ▃▇▆▃▂
5 year                      0         1     2008.    0.818 2007   2007   2008   2009   2009   ▇▁▇▁▇</code></pre>
</div>
</div>
</div>
</div>
<p><img data-src="figures/hex_skimr.png" class="absolute" style="top: 0px; right: 0px; width: 16%; " alt="Hex logo for the skimr R package"></p>
</section>
<section id="count-categories" class="slide level2">
<h2><code>count()</code> categories</h2>
<h3 class="spacer" id="count-is-from-dplyr"><code>count()</code> is from <code>dplyr</code>*</h3>
<ul>
<li>Check for sample sizes and potential typos in categorical columns</li>
<li>Assess missing values</li>
</ul>
<div class="columns">
<div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href=""></a><span class="fu">count</span>(penguins, species)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  species       n
  &lt;fct&gt;     &lt;int&gt;
1 Adelie      152
2 Chinstrap    68
3 Gentoo      124</code></pre>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href=""></a><span class="fu">count</span>(penguins, island)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  island        n
  &lt;fct&gt;     &lt;int&gt;
1 Biscoe      168
2 Dream       124
3 Torgersen    52</code></pre>
</div>
</div>
</div><div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href=""></a><span class="fu">count</span>(penguins, sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  sex        n
  &lt;fct&gt;  &lt;int&gt;
1 female   165
2 male     168
3 &lt;NA&gt;      11</code></pre>
</div>
</div>
</div>
</div>
<p><img data-src="figures/hex_dplyr.png" class="absolute" style="top: 0px; right: 0px; width: 16%; " alt="Hex logo for the dplyr R package"> <span class="footnote">* part of the <code>tidyverse</code></span></p>
</section>
<section id="plot-categories" class="slide level2">
<h2>Plot categories</h2>
<div class="spacer">
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href=""></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, <span class="fu">aes</span>(<span class="at">x =</span> COLUMN)) <span class="sc">+</span> </span>
<span id="cb51-2"><a href=""></a>  <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="columns" style="font-size: 75%">
<div class="column" style="width:33%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="3_loading_and_cleaning_files/figure-revealjs/unnamed-chunk-29-1.png" width="800"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:33%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="3_loading_and_cleaning_files/figure-revealjs/unnamed-chunk-30-1.png" width="800"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:33%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="3_loading_and_cleaning_files/figure-revealjs/unnamed-chunk-31-1.png" width="800"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<p><img data-src="figures/hex_ggplot2.png" class="absolute" style="top: 0px; right: 0px; width: 16%; " alt="Hex logo for the ggplot2 R package"> <span class="footnote">* part of the <code>tidyverse</code></span></p>
</section>
<section id="plot-numbers" class="slide level2">
<h2>Plot numbers</h2>
<div class="spacer">
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href=""></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, <span class="fu">aes</span>(<span class="at">x =</span> COLUMN)) <span class="sc">+</span> </span>
<span id="cb52-2"><a href=""></a>  <span class="fu">geom_histogram</span>()()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div style="font-size: 75%">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="3_loading_and_cleaning_files/figure-revealjs/unnamed-chunk-33-1.png" class="quarto-figure quarto-figure-center" style="width:80.0%"></p>
</figure>
</div>
</div>
</div>
</div>
<p><img data-src="figures/hex_ggplot2.png" class="absolute" style="top: 0px; right: 0px; width: 16%; " alt="Hex logo for the ggplot2 R package"> <span class="footnote">* part of the <code>tidyverse</code></span></p>
</section></section>
<section>
<section id="example-of-problematic-data" class="title-slide slide level1 center">
<h1>Example of problematic data</h1>
<p><span class="large"><a href="https://steffilazerte.ca/workshop-dealing-with-data/data/rivers_correct.csv"><code>rivers_correct.csv</code></a></span></p>
</section>
<section id="look-at-the-data-2" class="slide level2">
<h2>Look at the data</h2>
<div class="small">
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href=""></a>rivers <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/rivers_correct.csv"</span>)</span>
<span id="cb53-2"><a href=""></a>rivers</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 300 × 7
   `River Name` Site        Ele       Amo `Temperature C°`  Year Wea   
   &lt;chr&gt;        &lt;chr&gt;       &lt;chr&gt;   &lt;dbl&gt;            &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; 
 1 Grasse       Up stream   Al     0.606            10.9    2019 cloudy
 2 Grasse       Mid stream  Al     0.425             8.68   2020 cloudy
 3 Grase        Down stream Al     0.194             8.75   2021 snowy 
 4 Oswegatchie  Up stream   Al     1                 0.791  2022 sunny 
 5 Oswegatchie  Mid stream  Al     0.161             9.32   2023 cloudy
 6 Oswegatchie  Down stream Al     0.0333           10.6    2019 cloudy
 7 Raquette     Up stream   Al     0.292             4.01   2020 sunny 
 8 Raquette     Mid stream  Al     0.0389            5.96   2021 cloudy
 9 Raquette     Down stream Al    NA                 6.21   2022 cloudy
10 St. Regis    Up stream   Al     0.681             8.02   2023 cloudy
# ℹ 290 more rows</code></pre>
</div>
</div>
</div>
<ul>
<li>Column names are not great (<code>River Name</code> and <code>Temperature C°</code> are not R-friendly) or obvious (what is <code>Ele</code>?)</li>
<li>At least one typo in River (<code>Grase</code> should be <code>Grasse</code>)</li>
</ul>
</section>
<section id="looking-for-problems-2" class="slide level2">
<h2>Looking for problems</h2>
<h3 id="your-turn">Your Turn!</h3>
<ul>
<li><code>skim()</code> the data</li>
<li><code>count()</code> some columns</li>
<li>Perhaps make some <code>ggplot()</code>s</li>
</ul>
<p><span class="note absolute" style="">Find any problems?</span></p>
</section>



</section>
<section>
<section id="fixing-problems-1" class="title-slide slide level1 center">
<h1>Fixing problems</h1>

</section>
<section id="cleaning-column-names" class="slide level2">
<h2>Cleaning column names</h2>
<h3 class="spacer" id="clean_names-is-from-janitor"><code>clean_names()</code> is from <code>janitor</code>*</h3>
<p><span class="footnote">* <em>not</em> part of the <code>tidyverse</code> but <code>tidyverse</code>-orientated</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href=""></a><span class="fu">library</span>(janitor)</span>
<span id="cb67-2"><a href=""></a>rivers <span class="ot">&lt;-</span> <span class="fu">clean_names</span>(rivers)</span>
<span id="cb67-3"><a href=""></a>rivers</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<div class="sourceCode" id="cb68"><pre class="sourceCode numberSource small number-lines code-with-copy"><code class="sourceCode"><span id="cb68-1"><a href=""></a># A tibble: 300 × 7</span>
<span id="cb68-2"><a href=""></a>   river_name  site        ele       amo temperature_c  year wea   </span>
<span id="cb68-3"><a href=""></a>   &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;   &lt;dbl&gt;         &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; </span>
<span id="cb68-4"><a href=""></a> 1 Grasse      Up stream   Al     0.606         10.9    2019 cloudy</span>
<span id="cb68-5"><a href=""></a> 2 Grasse      Mid stream  Al     0.425          8.68   2020 cloudy</span>
<span id="cb68-6"><a href=""></a> 3 Grase       Down stream Al     0.194          8.75   2021 snowy </span>
<span id="cb68-7"><a href=""></a> 4 Oswegatchie Up stream   Al     1              0.791  2022 sunny </span>
<span id="cb68-8"><a href=""></a> 5 Oswegatchie Mid stream  Al     0.161          9.32   2023 cloudy</span>
<span id="cb68-9"><a href=""></a> 6 Oswegatchie Down stream Al     0.0333        10.6    2019 cloudy</span>
<span id="cb68-10"><a href=""></a> 7 Raquette    Up stream   Al     0.292          4.01   2020 sunny </span>
<span id="cb68-11"><a href=""></a> 8 Raquette    Mid stream  Al     0.0389         5.96   2021 cloudy</span>
<span id="cb68-12"><a href=""></a> 9 Raquette    Down stream Al    NA              6.21   2022 cloudy</span>
<span id="cb68-13"><a href=""></a>10 St. Regis   Up stream   Al     0.681          8.02   2023 cloudy</span>
<span id="cb68-14"><a href=""></a># ℹ 290 more rows</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p><img data-src="figures/hex_janitor.png" class="absolute" style="top: 0px; right: 0px; width: 10%; " alt="Hex logo for the janitor R package"> <!-- ![](figures/horst_janitor.png){width=57% .absolute top=20% right=-5%} --></p>
</section>
<section id="side-note-naming-conventions" class="slide level2">
<h2>Side Note: Naming conventions</h2>

<img data-src="figures/horst_case1.png" class="quarto-figure quarto-figure-center r-stretch" alt="Cartoon representations of common cases in coding. A snake screams &quot;SCREAMING_SNAKE_CASE&quot; into the face of a camel (wearing ear muffs) with &quot;camelCase&quot; written along its back. Vegetables on a skewer spell out &quot;kebab-case&quot; (words on a skewer). A mellow, happy looking snake has text &quot;snake_case&quot; along it."></section>
<section id="side-note-naming-conventions-1" class="slide level2">
<h2>Side Note: Naming conventions</h2>

<img data-src="figures/horst_case2.png" class="quarto-figure quarto-figure-center r-stretch" alt="Joke, totally made up failed programming cases. ducklingcasE (all lowercase, represented as small ducklings, until the last letter as the mama duck). BatCase (written upside down, on a bat cartoon). SH__K_CASE (shark case - screaming snake but with big chunks taken out -- a shark is below chomping on the missing AR. Lobster case: snake_case but backwards, written on a lobster carapace moving in reverse."></section>
<section id="cleaning-column-names-1" class="slide level2">
<h2>Cleaning column names</h2>
<h3 class="spacer" id="rename-is-from-dplyr"><code>rename()</code> is from <code>dplyr</code>*</h3>
<p><strong><code>rename()</code> columns</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href=""></a>rivers <span class="ot">&lt;-</span> <span class="fu">rename</span>(rivers, <span class="at">element =</span> ele, <span class="at">amount =</span> amo, <span class="at">temperature =</span> temperature_c)</span>
<span id="cb69-2"><a href=""></a>rivers</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 300 × 7
   river_name  site        element  amount temperature  year wea   
   &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;     &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; 
 1 Grasse      Up stream   Al       0.606       10.9    2019 cloudy
 2 Grasse      Mid stream  Al       0.425        8.68   2020 cloudy
 3 Grase       Down stream Al       0.194        8.75   2021 snowy 
 4 Oswegatchie Up stream   Al       1            0.791  2022 sunny 
 5 Oswegatchie Mid stream  Al       0.161        9.32   2023 cloudy
 6 Oswegatchie Down stream Al       0.0333      10.6    2019 cloudy
 7 Raquette    Up stream   Al       0.292        4.01   2020 sunny 
 8 Raquette    Mid stream  Al       0.0389       5.96   2021 cloudy
 9 Raquette    Down stream Al      NA            6.21   2022 cloudy
10 St. Regis   Up stream   Al       0.681        8.02   2023 cloudy
# ℹ 290 more rows</code></pre>
</div>
</div>
<p><img data-src="figures/hex_dplyr.png" class="absolute" style="top: 0px; right: 0px; width: 16%; " alt="Hex logo for the dplyr R package"> <span class="footnote">* part of the <code>tidyverse</code></span></p>
</section>
<section id="subsetting-columns" class="slide level2">
<h2>Subsetting columns</h2>
<h3 class="spacer" id="select-is-from-dplyr"><code>select()</code> is from <code>dplyr</code>*</h3>
<p><strong><code>select()</code> columns you want </strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href=""></a>rivers <span class="ot">&lt;-</span> <span class="fu">select</span>(rivers, river_name, site, element, amount)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img data-src="figures/hex_dplyr.png" class="absolute" style="top: 0px; right: 0px; width: 16%; " alt="Hex logo for the dplyr R package"> <span class="footnote">* part of the <code>tidyverse</code></span></p>
<div class="fragment">
<p><strong>OR, un<code>select()</code> columns you don’t want</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href=""></a>rivers <span class="ot">&lt;-</span> <span class="fu">select</span>(rivers, <span class="sc">-</span>wea)</span>
<span id="cb72-2"><a href=""></a>rivers</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 300 × 6
   river_name  site        element  amount temperature  year
   &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;     &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;
 1 Grasse      Up stream   Al       0.606       10.9    2019
 2 Grasse      Mid stream  Al       0.425        8.68   2020
 3 Grase       Down stream Al       0.194        8.75   2021
 4 Oswegatchie Up stream   Al       1            0.791  2022
 5 Oswegatchie Mid stream  Al       0.161        9.32   2023
 6 Oswegatchie Down stream Al       0.0333      10.6    2019
 7 Raquette    Up stream   Al       0.292        4.01   2020
 8 Raquette    Mid stream  Al       0.0389       5.96   2021
 9 Raquette    Down stream Al      NA            6.21   2022
10 St. Regis   Up stream   Al       0.681        8.02   2023
# ℹ 290 more rows</code></pre>
</div>
</div>
</div>
</section>
<section id="cleaning-columns" class="slide level2">
<h2>Cleaning columns</h2>
<h3 id="put-it-all-together">Put it all together</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href=""></a>rivers <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/rivers_correct.csv"</span>)</span>
<span id="cb74-2"><a href=""></a>rivers <span class="ot">&lt;-</span> <span class="fu">clean_names</span>(rivers)</span>
<span id="cb74-3"><a href=""></a>rivers <span class="ot">&lt;-</span> <span class="fu">rename</span>(rivers, <span class="at">element =</span> ele, <span class="at">amount =</span> amo, <span class="at">temperature =</span> temperature_c)</span>
<span id="cb74-4"><a href=""></a>rivers <span class="ot">&lt;-</span> <span class="fu">select</span>(rivers, <span class="sc">-</span>wea)</span>
<span id="cb74-5"><a href=""></a>rivers</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 300 × 6
   river_name  site        element  amount temperature  year
   &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;     &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;
 1 Grasse      Up stream   Al       0.606       10.9    2019
 2 Grasse      Mid stream  Al       0.425        8.68   2020
 3 Grase       Down stream Al       0.194        8.75   2021
 4 Oswegatchie Up stream   Al       1            0.791  2022
 5 Oswegatchie Mid stream  Al       0.161        9.32   2023
 6 Oswegatchie Down stream Al       0.0333      10.6    2019
 7 Raquette    Up stream   Al       0.292        4.01   2020
 8 Raquette    Mid stream  Al       0.0389       5.96   2021
 9 Raquette    Down stream Al      NA            6.21   2022
10 St. Regis   Up stream   Al       0.681        8.02   2023
# ℹ 290 more rows</code></pre>
</div>
</div>
<p><span class="note fragment absolute" style="bottom: 0px; ">Note how code repeats data frame <code>rivers</code>…</span></p>
</section>
<section id="fixing-typos" class="slide level2">
<h2>Fixing typos</h2>
<p>Remember the typos…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href=""></a><span class="fu">count</span>(rivers, river_name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 2
  river_name      n
  &lt;chr&gt;       &lt;int&gt;
1 Grase           1
2 Grasse         73
3 Oswegatchie    75
4 Raquette       74
5 St. Regis      75
6 grasse          1
7 raquette        1</code></pre>
</div>
</div>
</section>
<section id="fixing-typos-1" class="slide level2">
<h2>Fixing typos</h2>
<h3 id="replace-typos">Replace typos</h3>
<p>Combine the <code>if_else</code> function with the <code>mutate()</code> function</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href=""></a>rivers <span class="ot">&lt;-</span> <span class="fu">mutate</span>(rivers, <span class="at">river_name =</span> <span class="fu">if_else</span>(river_name <span class="sc">==</span> <span class="st">"Grase"</span>, <span class="st">"Grasse"</span>, river_name))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<h3 id="check-that-its-gone">Check that it’s gone:</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href=""></a><span class="fu">filter</span>(rivers, river_name <span class="sc">==</span> <span class="st">"Grase"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 6
# ℹ 6 variables: river_name &lt;chr&gt;, site &lt;chr&gt;, element &lt;chr&gt;, amount &lt;dbl&gt;, temperature &lt;dbl&gt;, year &lt;dbl&gt;</code></pre>
</div>
</div>
<div class="fragment spacer">
<!-- -->
<h3 id="if_else-and-mutate-from-dplyr-package"><code>if_else()</code> and <code>mutate()</code> from <code>dplyr</code> package*</h3>
<p><strong><code>mutate()</code></strong> creates or changes columns in a data frame:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href=""></a><span class="fu">mutate</span>(dataframe, <span class="at">column =</span> new_values)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong><code>if_else()</code></strong> tests for a condition, and returns one value if <code>FALSE</code> and another if <code>TRUE</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href=""></a><span class="fu">if_else</span>(condition, value_if_true, value_if_false)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img data-src="figures/hex_dplyr.png" class="absolute" style="top: 0px; right: 0px; width: 15%; " alt="Hex logo for the dplyr R package"> <span class="footnote">* part of the <code>tidyverse</code></span></p>
</div>
</section>
<section id="iterative-process" class="slide level2">
<h2>Iterative process</h2>
<ul>
<li>Make some corrections</li>
<li>Check the data</li>
<li>Make some more corrections (either add to or modify existing code)</li>
</ul>
<div class="fragment">
<!-- -->
<h3 id="many-corrections">Many corrections?</h3>
<p><span class="spacer"><strong>Try <code>case_when()</code> from <code>dplyr</code> package* </strong></span></p>
<div class="spacer">
<p><strong><code>case_when()</code></strong> tests for multiple conditions, and returns different values depending</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href=""></a><span class="fu">case_when</span>(condition1 <span class="sc">~</span> value_if_true1,</span>
<span id="cb83-2"><a href=""></a>          condition2 <span class="sc">~</span> value_if_true2,</span>
<span id="cb83-3"><a href=""></a>          condition3 <span class="sc">~</span> value_if_true3,</span>
<span id="cb83-4"><a href=""></a>          <span class="cn">TRUE</span> <span class="sc">~</span> default_value)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p><img data-src="figures/hex_dplyr.png" class="absolute" style="top: 0px; right: 0px; width: 15%; " alt="Hex logo for the dplyr R package"> <span class="footnote">* part of the <code>tidyverse</code></span></p>
</div>
</section>
<section id="your-turn-fix-another-grasse-typo" class="slide level2">
<h2>Your Turn: Fix another “Grasse” typo</h2>
<ol type="1">
<li>Check the data with <code>count()</code></li>
<li>Use <code>mutate()</code> and <code>if_else()</code> to fix the typo</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb84" data-code-line-numbers="7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href=""></a>rivers <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/rivers_correct.csv"</span>)</span>
<span id="cb84-2"><a href=""></a>rivers <span class="ot">&lt;-</span> <span class="fu">clean_names</span>(rivers)</span>
<span id="cb84-3"><a href=""></a>rivers <span class="ot">&lt;-</span> <span class="fu">rename</span>(rivers, <span class="at">element =</span> ele, <span class="at">amount =</span> amo, <span class="at">temperature =</span> temperature_c)</span>
<span id="cb84-4"><a href=""></a>rivers <span class="ot">&lt;-</span> <span class="fu">select</span>(rivers, <span class="sc">-</span>wea)</span>
<span id="cb84-5"><a href=""></a>rivers <span class="ot">&lt;-</span> <span class="fu">mutate</span>(rivers, <span class="at">river_name =</span> <span class="fu">if_else</span>(river_name <span class="sc">==</span> <span class="st">"Grase"</span>, <span class="st">"Grasse"</span>, river_name))</span>
<span id="cb84-6"><a href=""></a></span>
<span id="cb84-7"><a href=""></a>rivers <span class="ot">&lt;-</span> <span class="fu">mutate</span>(???, ??? <span class="ot">=</span> ???)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span class="note absolute" style="left: 50%; bottom: 20%; "><strong>Too Easy?</strong><br>Examine and fix problems in your own data</span> <span class="note absolute" style="left: 50%; bottom: 0px; width: 60%; "><strong>OR</strong><br>Use <code>case_when()</code> to fix all the river name typos at once…</span></p>
</section>


</section>
<section>
<section id="tangent-tidyverse-functions" class="title-slide slide level1 center">
<h1>Tangent: <code>tidyverse</code> functions</h1>

</section>
<section id="tidyverse-functions" class="slide level2">
<h2><code>tidyverse</code> functions</h2>
<h3 id="rename-select-mutate"><code>rename()</code>, <code>select()</code>, <code>mutate()</code></h3>
<ul>
<li><code>tidyverse</code> functions always start with the <strong>data</strong>, followed by other arguments</li>
<li>you can reference any <strong>column</strong> from ‘<strong>data</strong>’</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href=""></a>rivers <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/rivers_correct.csv"</span>)</span>
<span id="cb89-2"><a href=""></a>rivers <span class="ot">&lt;-</span> <span class="fu">clean_names</span>(rivers)</span>
<span id="cb89-3"><a href=""></a>rivers <span class="ot">&lt;-</span> <span class="fu">rename</span>(rivers, <span class="at">element =</span> ele, <span class="at">amount =</span> amo, <span class="at">temperature =</span> temperature_c)</span>
<span id="cb89-4"><a href=""></a>rivers <span class="ot">&lt;-</span> <span class="fu">select</span>(rivers, <span class="sc">-</span>wea)</span>
<span id="cb89-5"><a href=""></a>rivers <span class="ot">&lt;-</span> <span class="fu">mutate</span>(rivers, <span class="at">river_name =</span> <span class="fu">if_else</span>(river_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Grase"</span>, <span class="st">"grasse"</span>), <span class="st">"Grasse"</span>,  river_name))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><code>rename()</code> changes column names</li>
<li><code>select()</code> chooses columns to keep or to remove (with <code>-</code>)</li>
<li><code>mutate()</code> changes column contents</li>
</ul>
<p><img data-src="figures/hex_tidyverse.png" class="absolute" style="top: 0px; right: 0px; width: 16%; " alt="Hex logo for the tidyverse R package"></p>
</section>
<section id="why-use-tidyverse-functions" class="slide level2">
<h2>Why use <code>tidyverse</code> functions?</h2>
<h3 id="pipes-allow-you-to-string-commands-together">Pipes! <code>|&gt;</code>* Allow you to string commands together</h3>
<p>Instead of:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href=""></a>rivers <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/rivers_correct.csv"</span>)</span>
<span id="cb90-2"><a href=""></a>rivers <span class="ot">&lt;-</span> <span class="fu">clean_names</span>(rivers)</span>
<span id="cb90-3"><a href=""></a>rivers <span class="ot">&lt;-</span> <span class="fu">rename</span>(rivers, <span class="at">element =</span> ele, <span class="at">amount =</span> amo, <span class="at">temperature =</span> temperature_c)</span>
<span id="cb90-4"><a href=""></a>rivers <span class="ot">&lt;-</span> <span class="fu">select</span>(rivers, <span class="sc">-</span>wea)</span>
<span id="cb90-5"><a href=""></a>rivers <span class="ot">&lt;-</span> <span class="fu">mutate</span>(rivers, </span>
<span id="cb90-6"><a href=""></a>                 <span class="at">river_name =</span> <span class="fu">case_when</span>(river_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Grase"</span>, <span class="st">"grasse"</span>) <span class="sc">~</span> <span class="st">"Grasse"</span>,</span>
<span id="cb90-7"><a href=""></a>                                        river_name <span class="sc">==</span> <span class="st">"raquette"</span> <span class="sc">~</span> <span class="st">"Raquette"</span>,</span>
<span id="cb90-8"><a href=""></a>                                        <span class="cn">TRUE</span> <span class="sc">~</span> river_name))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span class="footnote">* <code>|&gt;</code> is the base pipe, <code>%&gt;%</code> is the tidyverse pipe, you can use either</span></p>
<p><img data-src="figures/hex_tidyverse.png" class="absolute" style="top: 0px; right: 0px; width: 16%; " alt="Hex logo for the tidyverse R package"></p>
<div class="fragment">
<p>We have:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href=""></a>rivers <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/rivers_correct.csv"</span>) <span class="sc">|&gt;</span></span>
<span id="cb91-2"><a href=""></a>  <span class="fu">clean_names</span>() <span class="sc">|&gt;</span></span>
<span id="cb91-3"><a href=""></a>  <span class="fu">rename</span>(<span class="at">element =</span> ele, <span class="at">amount =</span> amo, <span class="at">temperature =</span> temperature_c) <span class="sc">|&gt;</span></span>
<span id="cb91-4"><a href=""></a>  <span class="fu">select</span>(<span class="sc">-</span>wea) <span class="sc">|&gt;</span></span>
<span id="cb91-5"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">river_name =</span> <span class="fu">case_when</span>(river_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Grase"</span>, <span class="st">"grasse"</span>) <span class="sc">~</span> <span class="st">"Grasse"</span>,</span>
<span id="cb91-6"><a href=""></a>                                river_name <span class="sc">==</span> <span class="st">"raquette"</span> <span class="sc">~</span> <span class="st">"Raquette"</span>,</span>
<span id="cb91-7"><a href=""></a>                                <span class="cn">TRUE</span> <span class="sc">~</span> river_name))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="play-around" class="slide level2">
<h2>Play around</h2>
<p>Take a moment to play with this code in your console</p>
<h3 id="convert-this">Convert this:</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href=""></a>rivers <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/rivers_correct.csv"</span>)</span>
<span id="cb92-2"><a href=""></a>rivers <span class="ot">&lt;-</span> <span class="fu">clean_names</span>(rivers)</span>
<span id="cb92-3"><a href=""></a>rivers <span class="ot">&lt;-</span> <span class="fu">rename</span>(rivers, <span class="at">element =</span> ele, <span class="at">amount =</span> amo, <span class="at">temperature =</span> temperature_c)</span>
<span id="cb92-4"><a href=""></a>rivers <span class="ot">&lt;-</span> <span class="fu">select</span>(rivers, <span class="sc">-</span>wea)</span>
<span id="cb92-5"><a href=""></a>rivers <span class="ot">&lt;-</span> <span class="fu">mutate</span>(rivers, </span>
<span id="cb92-6"><a href=""></a>                 <span class="at">river_name =</span> <span class="fu">case_when</span>(river_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Grase"</span>, <span class="st">"grasse"</span>) <span class="sc">~</span> <span class="st">"Grasse"</span>,</span>
<span id="cb92-7"><a href=""></a>                                        river_name <span class="sc">==</span> <span class="st">"raquette"</span> <span class="sc">~</span> <span class="st">"Raquette"</span>,</span>
<span id="cb92-8"><a href=""></a>                                        <span class="cn">TRUE</span> <span class="sc">~</span> river_name))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<h3 id="to-this">To this:</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href=""></a>rivers <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/rivers_correct.csv"</span>) <span class="sc">|&gt;</span></span>
<span id="cb93-2"><a href=""></a>  <span class="fu">clean_names</span>() <span class="sc">|&gt;</span></span>
<span id="cb93-3"><a href=""></a>  <span class="fu">rename</span>(<span class="at">element =</span> ele, <span class="at">amount =</span> amo, <span class="at">temperature =</span> temperature_c) <span class="sc">|&gt;</span></span>
<span id="cb93-4"><a href=""></a>  <span class="fu">select</span>(<span class="sc">-</span>wea) <span class="sc">|&gt;</span></span>
<span id="cb93-5"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">river_name =</span> <span class="fu">case_when</span>(river_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Grase"</span>, <span class="st">"grasse"</span>) <span class="sc">~</span> <span class="st">"Grasse"</span>,</span>
<span id="cb93-6"><a href=""></a>                                river_name <span class="sc">==</span> <span class="st">"raquette"</span> <span class="sc">~</span> <span class="st">"Raquette"</span>,</span>
<span id="cb93-7"><a href=""></a>                                <span class="cn">TRUE</span> <span class="sc">~</span> river_name))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img data-src="figures/hex_tidyverse.png" class="absolute" style="top: 0px; right: 0px; width: 16%; " alt="Hex logo for the tidyverse R package"></p>
</section></section>
<section>
<section id="dealing-with-nas" class="title-slide slide level1 center">
<h1>Dealing with <code>NA</code>s</h1>
<p><span class="large">Data that <em>is</em> missing<br>Data that <em>should</em> be missing</span></p>
</section>
<section id="exploring-nas" class="slide level2">
<h2>Exploring <code>NA</code>s</h2>
<ul>
<li>We saw missing values in <code>amount</code></li>
<li>Use <code>filter()</code> to take a closer look</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href=""></a><span class="fu">filter</span>(rivers, <span class="fu">is.na</span>(amount))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 39 × 6
   river_name  site        element amount temperature  year
   &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;    &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;
 1 Raquette    Down stream Al          NA        6.21  2022
 2 Raquette    Up stream   Ba          NA        5.23  2022
 3 Raquette    Up stream   Br          NA      -99     2019
 4 Oswegatchie Up stream   Ca          NA        4.76  2023
 5 Raquette    Down stream Ce          NA       13.9   2020
 6 Grasse      Up stream   Cu          NA        9.13  2019
 7 Raquette    Down stream Dy          NA        4.98  2019
 8 Raquette    Down stream Er          NA        3.07  2021
 9 Raquette    Down stream Fe          NA        7.20  2023
10 Raquette    Down stream Gd          NA        4.73  2020
# ℹ 29 more rows</code></pre>
</div>
</div>
</section>
<section id="omitting-nas" class="slide level2">
<h2>Omitting <code>NA</code>s</h2>
<h3 class="spacer" id="drop_na-is-from-tidyr"><code>drop_na()</code> is from <code>tidyr</code>*</h3>
<div class="spacer">
<p>Omit <code>NA</code>s from the <code>amount</code> column only (drop those rows)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href=""></a>rivers_no_na <span class="ot">&lt;-</span> <span class="fu">drop_na</span>(rivers, amount)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Omit <strong>all</strong> <code>NA</code>s from <strong>all</strong> columns (drop those rows)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href=""></a>rivers_no_na <span class="ot">&lt;-</span> <span class="fu">drop_na</span>(rivers)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment spacer">
<p>Check…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href=""></a><span class="fu">filter</span>(rivers_no_na, <span class="fu">is.na</span>(amount))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 6
# ℹ 6 variables: river_name &lt;chr&gt;, site &lt;chr&gt;, element &lt;chr&gt;, amount &lt;dbl&gt;, temperature &lt;dbl&gt;, year &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href=""></a><span class="fu">nrow</span>(rivers_no_na)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 261</code></pre>
</div>
</div>
<p><span class="note absolute" style="bottom: -10%; ">No more <code>NA</code>s!<br>Fewer rows</span></p>
</div>
<p><span class="footnote">* part of the <code>tidyverse</code></span> <img data-src="figures/hex_tidyr.png" class="absolute" style="top: 0px; right: 0px; width: 20%; " alt="Hex logo for the tidyr R package"></p>
</section>
<section id="side-note-filter-also-omits-nas" class="slide level2">
<h2>Side Note: <code>filter()</code> also omits <code>NA</code>s 😱</h2>
<p>If we filter by the column with <code>NA</code>s, they are silently dropped</p>
<div class="small">
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href=""></a><span class="fu">filter</span>(rivers, amount <span class="sc">&lt;</span> <span class="fl">0.05</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15 × 6
   river_name  site        element  amount temperature  year
   &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;     &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;
 1 Oswegatchie Down stream Al      0.0333       10.6    2019
 2 Raquette    Mid stream  Al      0.0389        5.96   2021
 3 Grasse      Mid stream  Br      0.0357       12.4    2019
 4 St. Regis   Up stream   Br      0.0357        3.52   2022
 5 St. Regis   Mid stream  Br      0.0357        0.936  2023
 6 Raquette    Mid stream  Ce      0.0116        6.61   2019
 7 Raquette    Mid stream  Fe      0.00656      10.8    2022
 8 Grasse      Up stream   K       0.0313        3.61   2021
 9 Raquette    Mid stream  La      0.0275        2.50   2020
10 Oswegatchie Down stream Mn      0.00672       8.89   2019
# ℹ 5 more rows</code></pre>
</div>
</div>
</div>
<div class="small">
<p>We need to be explicit if we want to keep them</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href=""></a><span class="fu">filter</span>(rivers, amount <span class="sc">&lt;</span> <span class="fl">0.05</span> <span class="sc">|</span> <span class="fu">is.na</span>(amount))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 54 × 6
   river_name  site        element  amount temperature  year
   &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;     &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;
 1 Oswegatchie Down stream Al       0.0333      10.6    2019
 2 Raquette    Mid stream  Al       0.0389       5.96   2021
 3 Raquette    Down stream Al      NA            6.21   2022
 4 Raquette    Up stream   Ba      NA            5.23   2022
 5 Grasse      Mid stream  Br       0.0357      12.4    2019
 6 Raquette    Up stream   Br      NA          -99      2019
 7 St. Regis   Up stream   Br       0.0357       3.52   2022
 8 St. Regis   Mid stream  Br       0.0357       0.936  2023
 9 Oswegatchie Up stream   Ca      NA            4.76   2023
10 Raquette    Mid stream  Ce       0.0116       6.61   2019
# ℹ 44 more rows</code></pre>
</div>
</div>
</div>
</section>
<section id="replacing-nas" class="slide level2">
<h2>Replacing <code>NA</code>s</h2>
<h3 class="spacer" id="replace_na-is-from-tidyr"><code>replace_na()</code> is from <code>tidyr</code>*</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href=""></a>rivers_no_na <span class="ot">&lt;-</span> <span class="fu">mutate</span>(rivers, <span class="at">amount =</span> <span class="fu">replace_na</span>(amount, <span class="dv">0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment spacer">
<p>Check…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href=""></a><span class="fu">filter</span>(rivers_no_na, <span class="fu">is.na</span>(amount))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 6
# ℹ 6 variables: river_name &lt;chr&gt;, site &lt;chr&gt;, element &lt;chr&gt;, amount &lt;dbl&gt;, temperature &lt;dbl&gt;, year &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href=""></a><span class="fu">nrow</span>(rivers_no_na)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 300</code></pre>
</div>
</div>
<p><span class="note absolute" style="bottom: 25%; ">No more <code>NA</code>s!<br>Same number of rows</span></p>
</div>
<div class="fragment small spacer">
<p>(If you want to do a more complex replacement, you’ll have to use <code>if_else()</code> or <code>case_when()</code> like we did for typos.)</p>
</div>
<p><span class="footnote">* part of the <code>tidyverse</code></span> <img data-src="figures/hex_tidyr.png" class="absolute" style="top: 0px; right: 0px; width: 20%; " alt="Hex logo for the tidyr R package"></p>
</section>
<section id="converting-to-na" class="slide level2">
<h2>Converting <em>to</em> <code>NA</code></h2>
<p>Remember the problem with <code>temperature</code>?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href=""></a><span class="fu">filter</span>(rivers, temperature <span class="sc">&lt;</span> <span class="sc">-</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 6
  river_name  site       element amount temperature  year
  &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;    &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;
1 Raquette    Up stream  Br      NA             -99  2019
2 Oswegatchie Mid stream K        0.426         -99  2020
3 St. Regis   Mid stream La       0.367         -99  2023</code></pre>
</div>
</div>
<div class="fragment">
<!-- -->
<h3 class="spacer" id="na_if-is-from-dplyr"><code>na_if()</code> is from <code>dplyr</code>*</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href=""></a>rivers <span class="ot">&lt;-</span> <span class="fu">mutate</span>(rivers, <span class="at">temperature =</span> <span class="fu">na_if</span>(temperature, <span class="sc">-</span><span class="dv">99</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img data-src="figures/hex_dplyr.png" class="absolute" style="top: 0px; right: 0px; width: 16%; " alt="Hex logo for the dplyr R package"> <span class="footnote">* part of the <code>tidyverse</code></span></p>
</div>
<div class="fragment">
<p>Check…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href=""></a><span class="fu">filter</span>(rivers, <span class="fu">is.na</span>(temperature))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 6
  river_name  site       element amount temperature  year
  &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;    &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;
1 Raquette    Up stream  Br      NA              NA  2019
2 Oswegatchie Mid stream K        0.426          NA  2020
3 St. Regis   Mid stream La       0.367          NA  2023</code></pre>
</div>
</div>
</div>
</section></section>
<section>
<section id="fixing-formats" class="title-slide slide level1 center">
<h1>Fixing formats</h1>

</section>
<section id="changing-classes" class="slide level2">
<h2>Changing classes</h2>
<table>
<colgroup>
<col style="width: 31%">
<col style="width: 48%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th>Function</th>
<th>Input</th>
<th>Output</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>as.character()</code></td>
<td>Any vector</td>
<td>Text (Characters)</td>
</tr>
<tr class="even">
<td><code>as.numeric()</code></td>
<td>Any vector (but returns NAs if not numbers)</td>
<td>Numbers</td>
</tr>
<tr class="odd">
<td><code>as.logical()</code></td>
<td>TRUE, FALSE, T, F, 0 (FALSE), any other number (all TRUE)</td>
<td>TRUE or FALSE</td>
</tr>
<tr class="even">
<td><code>as.factor()</code></td>
<td>Any vector</td>
<td>Categories</td>
</tr>
</tbody>
</table>
<p><span class="note absolute" style="bottom: 33%; ">We’ll deal with dates and times later…</span></p>
<h3 style="margin-top:10%" id="your-turn-try-the-following">Your turn, try the following…</h3>
<div class="columns">
<div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href=""></a>a <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"hi"</span>, <span class="st">"hello"</span>, <span class="st">"bonjour"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href=""></a><span class="fu">as.character</span>(a)</span>
<span id="cb117-2"><a href=""></a><span class="fu">as.numeric</span>(a)</span>
<span id="cb117-3"><a href=""></a><span class="fu">as.logical</span>(a)</span>
<span id="cb117-4"><a href=""></a><span class="fu">as.factor</span>(a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href=""></a>b <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href=""></a><span class="fu">as.character</span>(b)</span>
<span id="cb119-2"><a href=""></a><span class="fu">as.numeric</span>(b)</span>
<span id="cb119-3"><a href=""></a><span class="fu">as.logical</span>(b)</span>
<span id="cb119-4"><a href=""></a><span class="fu">as.factor</span>(b)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>

<section id="look-for-problems" class="slide level2">
<h2>Look for problems</h2>
<div class="cell" data-highlight.output="3">
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href=""></a>rivers</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 300 × 6
   river_name  site        element  amount temperature  year
   &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;     &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;
 1 Grasse      Up stream   Al       0.606       10.9    2019
 2 Grasse      Mid stream  Al       0.425        8.68   2020
 3 Grasse      Down stream Al       0.194        8.75   2021
 4 Oswegatchie Up stream   Al       1            0.791  2022
 5 Oswegatchie Mid stream  Al       0.161        9.32   2023
 6 Oswegatchie Down stream Al       0.0333      10.6    2019
 7 Raquette    Up stream   Al       0.292        4.01   2020
 8 Raquette    Mid stream  Al       0.0389       5.96   2021
 9 Raquette    Down stream Al      NA            6.21   2022
10 St. Regis   Up stream   Al       0.681        8.02   2023
# ℹ 290 more rows</code></pre>
</div>
</div>
<p><span class="note absolute" style="bottom: 5%; ">Year could be categorical (factor)<br>Better for plotting!<br><span class="small">(although it really depends)</span></span></p>
</section>
<section id="convert-to-categorical" class="slide level2">
<h2>Convert to categorical</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href=""></a>rivers <span class="ot">&lt;-</span> <span class="fu">mutate</span>(rivers, <span class="at">year =</span> <span class="fu">factor</span>(year))</span>
<span id="cb140-2"><a href=""></a>rivers</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 300 × 6
   river_name  site        element  amount temperature year 
   &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;     &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;
 1 Grasse      Up stream   Al       0.606       10.9   2019 
 2 Grasse      Mid stream  Al       0.425        8.68  2020 
 3 Grasse      Down stream Al       0.194        8.75  2021 
 4 Oswegatchie Up stream   Al       1            0.791 2022 
 5 Oswegatchie Mid stream  Al       0.161        9.32  2023 
 6 Oswegatchie Down stream Al       0.0333      10.6   2019 
 7 Raquette    Up stream   Al       0.292        4.01  2020 
 8 Raquette    Mid stream  Al       0.0389       5.96  2021 
 9 Raquette    Down stream Al      NA            6.21  2022 
10 St. Regis   Up stream   Al       0.681        8.02  2023 
# ℹ 290 more rows</code></pre>
</div>
</div>
</section>
<section id="put-it-all-together-1" class="slide level2">
<h2>Put it all together…</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb142-1"><a href=""></a>rivers <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/rivers_correct.csv"</span>) <span class="sc">|&gt;</span></span>
<span id="cb142-2"><a href=""></a>  <span class="fu">clean_names</span>() <span class="sc">|&gt;</span></span>
<span id="cb142-3"><a href=""></a>  <span class="fu">rename</span>(<span class="at">element =</span> ele, <span class="at">amount =</span> amo, <span class="at">temperature =</span> temperature_c) <span class="sc">|&gt;</span></span>
<span id="cb142-4"><a href=""></a>  <span class="fu">select</span>(<span class="sc">-</span>wea) <span class="sc">|&gt;</span></span>
<span id="cb142-5"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">river_name =</span> <span class="fu">case_when</span>(river_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Grase"</span>, <span class="st">"grasse"</span>) <span class="sc">~</span> <span class="st">"Grasse"</span>,</span>
<span id="cb142-6"><a href=""></a>                                river_name <span class="sc">==</span> <span class="st">"raquette"</span> <span class="sc">~</span> <span class="st">"Raquette"</span>,</span>
<span id="cb142-7"><a href=""></a>                                <span class="cn">TRUE</span> <span class="sc">~</span> river_name),</span>
<span id="cb142-8"><a href=""></a>         <span class="at">amount =</span> <span class="fu">replace_na</span>(amount, <span class="dv">0</span>),</span>
<span id="cb142-9"><a href=""></a>         <span class="at">temperature =</span> <span class="fu">na_if</span>(temperature, <span class="sc">-</span><span class="dv">99</span>),</span>
<span id="cb142-10"><a href=""></a>         <span class="at">year =</span> <span class="fu">factor</span>(year)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<h3 class="spacer" id="and-you-have-a-clean-corrected-data-frame-ready-to-use">And you have a clean, corrected data frame ready to use</h3>
<ul>
<li>You have not changed the original data</li>
<li>You have a <strong>reproducible</strong> record of all corrections</li>
<li>You can alter these corrections at any time</li>
<li>You have formatted your data for use in R</li>
<li>Read these steps line by line to remind yourself what you did</li>
</ul>
</section>
<section id="put-it-all-together-2" class="slide level2">
<h2>Put it all together…</h2>
<h3 id="feel-free-to-annotate-within-a-pipe">Feel free to annotate within a pipe</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href=""></a>rivers <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/rivers_correct.csv"</span>) <span class="sc">|&gt;</span></span>
<span id="cb143-2"><a href=""></a>  <span class="co"># Fix column names</span></span>
<span id="cb143-3"><a href=""></a>  <span class="fu">clean_names</span>() <span class="sc">|&gt;</span></span>
<span id="cb143-4"><a href=""></a>  <span class="fu">rename</span>(<span class="at">element =</span> ele, <span class="at">amount =</span> amo, <span class="at">temperature =</span> temperature_c) <span class="sc">|&gt;</span></span>
<span id="cb143-5"><a href=""></a>  <span class="fu">select</span>(<span class="sc">-</span>wea) <span class="sc">|&gt;</span></span>
<span id="cb143-6"><a href=""></a>  <span class="fu">mutate</span>(</span>
<span id="cb143-7"><a href=""></a>    <span class="co"># Correct typos</span></span>
<span id="cb143-8"><a href=""></a>    <span class="at">river_name =</span> <span class="fu">case_when</span>(river_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Grase"</span>, <span class="st">"grasse"</span>) <span class="sc">~</span> <span class="st">"Grasse"</span>,</span>
<span id="cb143-9"><a href=""></a>                           river_name <span class="sc">==</span> <span class="st">"raquette"</span> <span class="sc">~</span> <span class="st">"Raquette"</span>,</span>
<span id="cb143-10"><a href=""></a>                           <span class="cn">TRUE</span> <span class="sc">~</span> river_name),</span>
<span id="cb143-11"><a href=""></a>    <span class="co"># Missing amounts should be 0</span></span>
<span id="cb143-12"><a href=""></a>    <span class="at">amount =</span> <span class="fu">replace_na</span>(amount, <span class="dv">0</span>),</span>
<span id="cb143-13"><a href=""></a>    <span class="co"># Problems with temperature logger, -99 is a mistake</span></span>
<span id="cb143-14"><a href=""></a>    <span class="at">temperature =</span> <span class="fu">na_if</span>(temperature, <span class="sc">-</span><span class="dv">99</span>),</span>
<span id="cb143-15"><a href=""></a>    <span class="co"># Convert for plotting </span></span>
<span id="cb143-16"><a href=""></a>    <span class="at">year =</span> <span class="fu">factor</span>(year)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section>
<section>
<section id="dates-and-times" class="title-slide slide level1 center">
<h1>Dates and Times</h1>
<p><span class="large"><strong>(Or why does R hate me?)</strong></span></p>
</section>
<section id="dates-and-times-1" class="slide level2">
<h2>Dates and Times</h2>
<ul>
<li>Date/times aren’t always recognized as date/times</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb144"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb144-1"><a href=""></a>geolocators <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/geolocators.csv"</span>, <span class="at">col_names =</span> <span class="fu">c</span>(<span class="st">"time"</span>, <span class="st">"light"</span>))</span>
<span id="cb144-2"><a href=""></a>geolocators</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21 × 2
  time              light
  &lt;chr&gt;             &lt;dbl&gt;
1 02/05/11 22:29:59    64
2 02/05/11 22:31:59    64
3 02/05/11 22:33:59    38
4 02/05/11 22:35:59    38
5 02/05/11 22:37:59    34
6 02/05/11 22:39:59    30
# ℹ 15 more rows</code></pre>
</div>
</div>
<blockquote>
<p>Here <code>time</code> column is considered <code>chr</code> (character/text)</p>
<p><strong>You</strong> may know it’s a date, but R does not</p>
</blockquote>
</section>
<section id="section" class="slide level2" data-menu-title="lubridate" data-background-image="figures/horst_lubridate_ymd.png" data-background-size="75%" data-background-position="top" title="Fuzzy cartoon monsters in construction hats sorting a pile of &quot;Y&quot; &quot;M&quot; and &quot;D&quot; into separate piles labeled &quot;Years&quot;, &quot;Months&quot; and &quot;Days&quot;. Title text reads &quot;Lubridate: wrangle times and dates!&quot;">
<h2></h2>
<p><span class="footnote">Artwork by <a href="https://github.com/allisonhorst/stats-illustrations"><span class="citation" data-cites="allison_horst">@allison_horst</span></a></span></p>
</section>
<section id="lubridate-package" class="slide level2">
<h2><code>lubridate</code> package *</h2>
<ul>
<li>Part of <code>tidyverse</code>, but needs to be loaded separately</li>
<li>Great for converting date/times <span class="small">(i.e.&nbsp;telling R this is a date/time)</span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a href=""></a><span class="fu">library</span>(lubridate)</span>
<span id="cb146-2"><a href=""></a>geolocators <span class="ot">&lt;-</span> <span class="fu">mutate</span>(geolocators, <span class="at">time_fixed =</span> <span class="fu">dmy_hms</span>(time))</span>
<span id="cb146-3"><a href=""></a>geolocators</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21 × 3
  time              light time_fixed         
  &lt;chr&gt;             &lt;dbl&gt; &lt;dttm&gt;             
1 02/05/11 22:29:59    64 2011-05-02 22:29:59
2 02/05/11 22:31:59    64 2011-05-02 22:31:59
3 02/05/11 22:33:59    38 2011-05-02 22:33:59
4 02/05/11 22:35:59    38 2011-05-02 22:35:59
5 02/05/11 22:37:59    34 2011-05-02 22:37:59
6 02/05/11 22:39:59    30 2011-05-02 22:39:59
# ℹ 15 more rows</code></pre>
</div>
</div>
<blockquote>
<p>Now <code>time_fixed</code> column is considered <code>dttm</code> (Date/Time)</p>
<p>So <strong>You</strong> know it’s a Date/Time and now <strong>R</strong> knows too</p>
</blockquote>
<p><img data-src="figures/hex_lubridate.png" class="absolute" style="top: 0px; right: 0px; width: 16%; " alt="Hex logo for the lubridate R package"> <span class="footnote">* part of the <code>tidyverse</code></span></p>
</section>
<section id="lubridate-package-1" class="slide level2">
<h2><code>lubridate</code> package *</h2>
<p><img data-src="figures/hex_lubridate.png" class="absolute" style="top: 0px; right: 0px; width: 16%; " alt="Hex logo for the lubridate R package"></p>
<p>Generally, only the order of the <strong>y</strong>ear, <strong>m</strong>onth, <strong>d</strong>ay, <strong>h</strong>our, <strong>m</strong>inute, or <strong>s</strong>econd matters.</p>
<p><strong>For example</strong></p>
<div class="spacer">
<table>
<thead>
<tr class="header">
<th>date/time format</th>
<th>function</th>
<th>output class</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>2018-01-01 13:09:11</td>
<td><code>ymd_hms()</code></td>
<td>dttm (POSIXct/POSIXt)</td>
</tr>
<tr class="even">
<td>12/20/2019 10:00 PM</td>
<td><code>mdy_hm()</code></td>
<td>dttm (POSIXct/POSIXt)</td>
</tr>
<tr class="odd">
<td>31/01/2000 10 AM</td>
<td><code>dmy_h()</code></td>
<td>dttm (POSIXct/POSIXt)</td>
</tr>
<tr class="even">
<td>31-01/2000</td>
<td><code>dmy()</code></td>
<td>Date</td>
</tr>
</tbody>
</table>
</div>
<div class="spacer">
<blockquote>
<p><code>lubridate</code> is smart enough to detect AMs and PMs</p>
</blockquote>
</div>
<p><span class="footnote"><strong>Note:</strong> R <em>generally</em> requires that times have dates (<code>datetime</code>/<code>POSIXct</code>), but dates don’t have to have times (<code>Date</code>)<br> * part of the <code>tidyverse</code></span></p>
</section></section>
<section>
<section id="saving-data" class="title-slide slide level1 center">
<h1>Saving data</h1>
<p><span class="large">(For the love of all that is good don’t <em>lose</em> that data!!!)*</span></p>
<p><span class="small" style="color:grey;display:block;margin-top:60px">* but if you’ve been paying attention, you know that you only need the script 😉</span></p>
</section>
<section id="saving-data-1" class="slide level2">
<h2>Saving data</h2>
<h3 id="keep-yourself-organized-1">Keep yourself organized</h3>
<ul>
<li>Keep your R-created data in a <strong>different</strong> folder from your ‘raw’ data *</li>
<li>If you have a lot going on, split your work into several scripts, and number the both the scripts AND the data sets produced:</li>
<li><code>1_cleaned.csv</code></li>
<li><code>2_summarized.csv</code></li>
<li><code>3_graphing.csv</code></li>
</ul>
<div class="fragment">
<!-- -->
<h3 id="save-your-data-to-file">Save your data to file:</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href=""></a><span class="fu">write_csv</span>(rivers, <span class="st">"datasets/rivers_cleaned.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img data-src="figures/hex_readr.png" class="absolute" style="bottom: 12%; right: 0px; width: 16%; " alt="Hex logo for the readr R package"></p>
</div>
<p><span class="footnote">* I usually have a <code>data</code> folder and then both <code>raw</code> and <code>datasets</code> folders inside of that</span></p>
</section>
<section id="dealing-with-data-1" class="slide level2">
<h2>Dealing with data</h2>
<div class="columns">
<div class="column" style="width:50%;">
<h3 id="loading-data-2">1. Loading data</h3>
<ul>
<li>Get your data into R</li>
</ul>
<h3 id="looking-for-problems-3">2. Looking for problems</h3>
<ul>
<li>Typos</li>
<li>Incorrectly loaded data</li>
</ul>
<h3 id="fixing-problems-2">3. Fixing problems</h3>
<ul>
<li>Corrections</li>
<li>Renaming</li>
</ul>
</div><div class="column" style="width:50%;">
<h3 id="setting-formats-1">4. Setting formats</h3>
<ul>
<li>Dates</li>
<li>Numbers</li>
<li>Factors</li>
</ul>
<h3 id="saving-your-data-1">5. Saving your data</h3>
</div>
</div>
</section>
<section id="wrapping-up-common-mistakes" class="slide level2">
<h2>Wrapping up: Common mistakes</h2>
<h3 id="assuming-your-data-is-in-one-format-when-its-not">Assuming your data is in one format when it’s not</h3>
<ul>
<li>Print your data to the console and use <code>skim()</code> to explore the format of your data</li>
<li>Use <code>skim()</code>, <code>count()</code>, <code>filter()</code>, <code>select()</code>, <code>ggplot()</code> to explore the content of your data</li>
</ul>
</section>
<section id="wrapping-up-common-mistakes-1" class="slide level2">
<h2>Wrapping up: Common mistakes</h2>
<h3 id="confusing-pipes-with-function-arguments">Confusing pipes with function arguments</h3>
<ul>
<li>Pipes (<code>|&gt;</code> or <code>%&gt;%</code>) pass the <em>output</em> from one function as <em>input</em> to the next function:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href=""></a>my_data <span class="ot">&lt;-</span> my_data <span class="sc">|&gt;</span>                 <span class="co"># Pass my_data</span></span>
<span id="cb149-2"><a href=""></a>  <span class="fu">filter</span>(my_column <span class="sc">&gt;</span> <span class="dv">5</span>) <span class="sc">|&gt;</span>            <span class="co"># Pass my_data, filtered</span></span>
<span id="cb149-3"><a href=""></a>  <span class="fu">select</span>(my_column, my_second_column)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Arguments may be on different lines, but all part of <em>one</em> function</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href=""></a>my_data <span class="ot">&lt;-</span> my_data <span class="sc">|&gt;</span>                  <span class="co"># Pass my_data</span></span>
<span id="cb150-2"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">my_column1 =</span> <span class="fu">if_else</span>(...),    <span class="co"># No passing (no pipes!)</span></span>
<span id="cb150-3"><a href=""></a>         <span class="at">my_column2 =</span> <span class="fu">if_else</span>(...),    <span class="co"># Instead, give 3 arguments to mutate:</span></span>
<span id="cb150-4"><a href=""></a>         <span class="at">my_column3 =</span> <span class="fu">if_else</span>(...))    <span class="co"># Arguments separated by ",", and surrounded by ( )</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="wrapping-up-further-reading" class="slide level2">
<h2>Wrapping up: Further reading</h2>
<ul>
<li>R for Data Science
<ul>
<li><a href="https://r4ds.hadley.nz/data-transform.html">Chapter 3: Data transformation</a></li>
<li><a href="https://r4ds.hadley.nz/workflow-scripts.html">Chapter 6: Workflow: scripts and projects</a></li>
<li><a href="https://r4ds.hadley.nz/strings.html">Chapter 14: Strings</a></li>
<li><a href="https://r4ds.hadley.nz/factors.html">Chapter 16: Factors</a></li>
<li><a href="https://r4ds.hadley.nz/workflow-style.html#sec-pipes">Chapter 4.3: Workflow: code style &gt; Pipes</a></li>
</ul></li>
</ul>
<div class="quarto-auto-generated-content">
<div class="footer footer-default">

</div>
</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="3_loading_and_cleaning_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="3_loading_and_cleaning_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="3_loading_and_cleaning_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="3_loading_and_cleaning_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="3_loading_and_cleaning_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="3_loading_and_cleaning_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="3_loading_and_cleaning_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="3_loading_and_cleaning_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="3_loading_and_cleaning_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="3_loading_and_cleaning_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1200,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>