<!DOCTYPE html>
<html lang="en"><head>
<script src="3_loading_and_cleaning_files/libs/clipboard/clipboard.min.js"></script>
<script src="3_loading_and_cleaning_files/libs/quarto-html/tabby.min.js"></script>
<script src="3_loading_and_cleaning_files/libs/quarto-html/popper.min.js"></script>
<script src="3_loading_and_cleaning_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="3_loading_and_cleaning_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="3_loading_and_cleaning_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="3_loading_and_cleaning_files/libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<link href="3_loading_and_cleaning_files/libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="3_loading_and_cleaning_files/libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.39">

  <meta name="dcterms.date" content="2025-01-12">
  <title>Loading &amp; Cleaning Data in R</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="3_loading_and_cleaning_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="3_loading_and_cleaning_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="3_loading_and_cleaning_files/libs/revealjs/dist/theme/quarto-560a7fb8c8fb23736e113fee4ef09eaa.css">
  <link href="3_loading_and_cleaning_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="3_loading_and_cleaning_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="3_loading_and_cleaning_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="3_loading_and_cleaning_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-image="figures/dataset.png" data-background-position="95% 50%" data-background-size="40%" class="center">

    <p class="absolute" style="top:0">Workshop: Dealing with Data in R</p>
  
  
  <h1 class="title" style="padding-top: 150px;">Loading &amp; Cleaning Data in R</h1>
    <h3 class="subtitle" style="padding-top:5px;"><strong>I know the file exists, why doesn’t R?</strong></h3>
  
    <p style="font-size:70%; padding-top: 120px">
    <i class="fa-brands fa-github"></i> <a href="https://github.com/steffilazerte">steffilazerte</a><br>
    <i class="fa-brands fa-mastodon"></i> <a href="https://fosstodon.org/@steffilazerte">@steffilazerte@fosstodon.org</a><br>
    <i class="fa-brands fa-twitter"></i> <a href="https://twitter.com/steffilazerte">@steffilazerte</a><br>
    <i class="fa-solid fa-globe"></i> <a href="https://steffilazerte.ca">steffilazerte.ca</a><br>
    <img src="figures/steffi_logo.png" width="30%">
  </p>
  
  
  
    <p class="date">Compiled: 2025-01-12</p>
  </section>
<section>
<section id="first-things-first" class="title-slide slide level1 center">
<h1>First things first</h1>
<div style="text-align:left; padding: 15px 200px 15px 200px">
<p><i class="fa-solid fa-floppy-disk" aria-label="floppy-disk"></i> Save previous script</p>
<p><i class="fa-solid fa-folder-open" aria-label="folder-open"></i> Open New File <br> <span class="small hang">(make sure you’re in the RStudio Project)</span></p>
<p><i class="fa-solid fa-pen" aria-label="pen"></i> Write <code>library(tidyverse)</code> at the top</p>
<p><i class="fa-solid fa-floppy-disk" aria-label="floppy-disk"></i> Save this new script <br> <span class="small hang">(consider names like <code>cleaning.R</code> or <code>3_loading_and_cleaning.R</code>)</span></p>
</div>
</section>
<section id="download-the-data-well-use-in-this-workshop" class="slide level2">
<h2>Download the data we’ll use in this workshop</h2>
<ol type="1">
<li>Create a ‘<strong>data</strong>’ folder in your RStudio project
<ul>
<li>In the “Files” pane click on the folder icon <strong>OR</strong></li>
<li>Navigate to your project folder via your computer’s file browser</li>
</ul></li>
</ol>

<img data-src="figures/files.png" alt="Screenshot of the file viewer pane in RStudio with &quot;New Folder&quot; circled in red" class="r-stretch quarto-figure-center"><p class="caption">Click on “New Folder”</p><p><span style="margin-top:10px;"></span></p>
<ol start="2" type="1">
<li>Right-click “Save Link As..” and download these files to your <strong>data</strong> folder
<ul>
<li><a href="https://steffilazerte.ca/workshop-dealing-with-data/data/water_cleaned.xlsx"><code>water_cleaned.xlsx</code></a></li>
<li><a href="https://steffilazerte.ca/workshop-dealing-with-data/data/water_raw.csv"><code>water_raw.csv</code></a></li>
<li><a href="https://steffilazerte.ca/workshop-dealing-with-data/data/master_moch.txt"><code>master_moch.txt</code></a></li>
<li><a href="https://steffilazerte.ca/workshop-dealing-with-data/data/geolocators.csv"><code>geolocators.csv</code></a></li>
<li><a href="https://steffilazerte.ca/workshop-dealing-with-data/data/grain_size.txt"><code>grain_size.txt</code></a></li>
<li><a href="https://steffilazerte.ca/workshop-dealing-with-data/data/grain_size2.csv">grain_size2.csv</a></li>
<li><a href="https://steffilazerte.ca/workshop-dealing-with-data/data/grain_meta.csv">grain_meta.csv</a></li>
<li><a href="https://steffilazerte.ca/workshop-dealing-with-data/data/Sta%20A%20Data%202006-11-07.dmp"><code>Sta A Data 2006-11-07.dmp</code></a></li>
</ul></li>
</ol>
</section></section>
<section>
<section id="side-note" class="title-slide slide level1 center">
<h1>Side Note</h1>
<p><em>R base vs.&nbsp;<code>tidyverse</code></em></p>
</section>
<section id="r-base-vs.-tidyverse" class="slide level2">
<h2>R base vs.&nbsp;<code>tidyverse</code></h2>
<h3 id="r-base">R base</h3>
<ul>
<li>Basic R</li>
<li>Packages are installed and loaded by default</li>
<li>Base pipe <code>|&gt;</code> *</li>
</ul>
<p><img data-src="figures/logo_r.png" class="absolute" style="top: 10%; right: 20%; width: 20%; " alt="RStudio blue ball logo"></p>
<p><span class="footnote">*We’ll cover pipes soon 😁</span></p>
<div class="fragment">
<h3 id="tidyverse"><code>tidyverse</code></h3>
<ul>
<li>Collection of ‘new’ packages developed by a team closely affiliated with RStudio
<ul>
<li>e.g., <code>ggplot2</code>, <code>dplyr</code>, <code>tidyr</code>, <code>readr</code></li>
<li>Packages designed to work well together</li>
</ul></li>
<li>Use a slightly different syntax</li>
<li>tidyverse pipe <code>%&gt;%</code> or base pipe <code>|&gt;</code> *</li>
</ul>
<p><img data-src="figures/hex_tidyverse.png" class="absolute" style="bottom: 0px; right: 40%; width: 15%; " alt="Hex logo for the tidyverse R package"></p>
</div>
<p><span class="fragment note absolute" style="left: 80%; bottom: 5%; width: 25%; ">Useful to know if functions are<br><strong><code>tidyverse</code></strong> or <strong>R base</strong></span></p>
</section>
<section id="dealing-with-data" class="slide level2">
<h2>Dealing with data</h2>
<div class="columns">
<div class="column" style="width:50%;">
<h3 id="loading-data">1. Loading data</h3>
<ul>
<li>Get your data into R</li>
</ul>
<h3 id="looking-for-problems">2. Looking for problems</h3>
<ul>
<li>Typos</li>
<li>Incorrectly loaded data</li>
</ul>
<h3 id="fixing-problems">3. Fixing problems</h3>
<ul>
<li>Corrections</li>
<li>Renaming</li>
<li>Dealing with NA’s</li>
</ul>
</div><div class="column" style="width:50%;">
<h3 id="setting-formats">4. Setting formats</h3>
<ul>
<li>Text,</li>
<li>Numbers</li>
<li>Factors</li>
<li>Dates</li>
</ul>
<h3 id="saving-your-data">5. Saving your data</h3>
</div></div>
</section></section>
<section>
<section id="loading-data-1" class="title-slide slide level1 center">
<h1>Loading Data</h1>

</section>
<section id="data-types-what-kind-of-data-do-you-have" class="slide level2">
<h2>Data types: What kind of data do you have?</h2>
<h3 id="specific-program-files">Specific program files</h3>
<div class="columns">
<div class="column" style="width:80%;">
<table class="caption-top">
<colgroup>
<col style="width: 25%">
<col style="width: 31%">
<col style="width: 20%">
<col style="width: 22%">
</colgroup>
<thead>
<tr class="header">
<th>Type</th>
<th>Extension</th>
<th>R Package</th>
<th>R function</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Excel</td>
<td>.xls, .xlsx</td>
<td><code>readxl</code>*</td>
<td><code>read_excel()</code></td>
</tr>
<tr class="even">
<td>Open Document</td>
<td>.ods</td>
<td><code>readODS</code></td>
<td><code>read_ods()</code></td>
</tr>
<tr class="odd">
<td>SPSS</td>
<td>.sav, .zsav, .por</td>
<td><code>haven</code></td>
<td><code>read_spss()</code></td>
</tr>
<tr class="even">
<td>SAS</td>
<td>.sas7bdat</td>
<td><code>haven</code></td>
<td><code>read_sas()</code></td>
</tr>
<tr class="odd">
<td>Stata</td>
<td>.dta</td>
<td><code>haven</code></td>
<td><code>read_dta()</code></td>
</tr>
<tr class="even">
<td>Database Files</td>
<td>.dbf</td>
<td><code>foreign</code></td>
<td><code>read.dbf()</code></td>
</tr>
</tbody>
</table>
</div></div>
<div class="fragment">
<h3 id="convenient-but">Convenient but…</h3>
<ul>
<li>Can be unreliable</li>
<li>Can take longer</li>
</ul>
</div>
<p><span class="fragment note absolute" style="left: 60%; bottom: 0px; ">For files that don’t change, better to save as a <code>*.csv</code><br> (Comma-separated-variables file)</span></p>
<p><img data-src="figures/hex_readxl.png" class="absolute" style="top: 0px; right: 0px; width: 16%; " alt="Hex logo for the readxl R package"> <span class="footnote">* part of the <code>tidyverse</code></span></p>
</section>
<section id="data-types-what-kind-of-data-do-you-have-1" class="slide level2">
<h2>Data types: What kind of data do you have?</h2>
<h3 id="general-text-files">General text files</h3>
<table class="caption-top">
<thead>
<tr class="header">
<th>Type</th>
<th>R base</th>
<th><code>readr</code> package *</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Comma separated</td>
<td><code>read.csv()</code></td>
<td><code>read_csv()</code>, <code>read_csv2()</code></td>
</tr>
<tr class="even">
<td>Tab separated</td>
<td><code>read.delim()</code></td>
<td><code>read_tsv()</code></td>
</tr>
<tr class="odd">
<td>Space separated</td>
<td><code>read.table()</code></td>
<td><code>read_table()</code></td>
</tr>
<tr class="even">
<td>Fixed-width</td>
<td><code>read.fwf()</code></td>
<td><code>read_fwf()</code></td>
</tr>
</tbody>
</table>
<p><img data-src="figures/hex_readr.png" class="absolute" style="top: 0px; right: 0px; width: 16%; " alt="Hex logo for the readr R package"> <span class="footnote">* part of the <code>tidyverse</code></span></p>
<div class="fragment spacer">
<ul>
<li><strong><code>readr</code> package</strong> especially useful for big data sets (fast!)</li>
<li>Error/warnings from <code>readr</code> are a bit more helpful</li>
</ul>
</div>
<div class="fragment note absolute" style="bottom: -15%; width: 50%; ">
<p><span class="large"><strong>We’ll focus on</strong></span></p>
<ul>
<li><code>readxl</code> package <i class="fa-solid fa-arrow-right" aria-label="arrow-right"></i> <code>read_excel()</code><br>
</li>
<li><code>readr</code> package <i class="fa-solid fa-arrow-right" aria-label="arrow-right"></i> <code>read_csv()</code>, <code>read_tsv()</code><br>
</li>
</ul>
</div>
</section>
<section id="where-is-my-data" class="slide level2">
<h2>Where is my data?</h2>
<h3 id="common-error">Common error</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href=""></a>my_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"weather.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error: 'weather.csv' does not exist in current working directory ('/home/steffi/Projects/Workshops/workshop-dealing-with-data').</code></pre>
</div>
</div>
<p>With no folder (just file name) R expects file to be in <strong>Working directory</strong></p>
<div class="fragment spacer">
<h3 id="working-directory-is">Working directory is:</h3>
<ul>
<li>Where your RStudio project is</li>
<li>Your home directory (My Documents, etc.) [If not using RStudio Projects]</li>
<li>Where you’ve set it (using <code>setwd()</code> or RStudio’s Session &gt; Set Working Directory)</li>
</ul>
</div>
<div class="fragment note absolute" style="bottom: -5%; width: 50%; ">
<p><strong>Don’t</strong> use <code>setwd()</code><br>
<strong>Do</strong> use Projects in RStudio</p>
</div>
</section>
<section id="where-is-my-data-1" class="slide level2">
<h2>Where is my data?</h2>
<h3 id="a-note-on-file-paths-file-locations">A note on file paths (file locations)</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href=""></a><span class="sc">/</span>home</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>folders separated by <code>/</code></li>
<li><code>home</code> is a folder</li>
</ul>
</section>
<section id="where-is-my-data-2" class="slide level2">
<h2>Where is my data?</h2>
<h3 id="a-note-on-file-paths-file-locations-1">A note on file paths (file locations)</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href=""></a><span class="sc">/</span>home<span class="sc">/</span>steffi<span class="sc">/</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>folders separated by <code>/</code></li>
<li><code>home</code> and <code>steffi</code> are folders</li>
<li><code>steffi</code> is a folder inside of <code>home</code></li>
</ul>
</section>
<section id="where-is-my-data-3" class="slide level2">
<h2>Where is my data?</h2>
<h3 id="a-note-on-file-paths-file-locations-2">A note on file paths (file locations)</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href=""></a><span class="sc">/</span>home<span class="sc">/</span>steffi<span class="sc">/</span>Documents<span class="sc">/</span>R Projects<span class="sc">/</span>mydata.csv</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>folders separated by <code>/</code></li>
<li><code>home</code>, <code>steffi</code>, <code>Documents</code>, <code>R Projects</code> are folders</li>
<li><code>steffi</code> is inside of <code>home</code>, <code>Documents</code> is inside of <code>steffi</code>, etc.</li>
<li><code>mydata.csv</code> is a data file inside <code>R Projects</code> folder</li>
</ul>

<img data-src="figures/file_viewer.png" style="width:40.0%" alt="Screenshot of RStudio file pane showing mydata.csv" class="r-stretch quarto-figure-center"><p class="caption">RStudio Files Pane</p></section>
<section id="where-is-my-data-4" class="slide level2">
<h2>Where is my data?</h2>
<h3 id="absolute-paths"><strong>Absolute</strong> Paths</h3>
<div class="small left">
<table class="caption-top">
<thead>
<tr class="header">
<th>OS</th>
<th>Path</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>LINUX</strong></td>
<td>/home/steffi/Documents/R Projects/mydata.csv</td>
</tr>
<tr class="even">
<td><strong>WINDOWS</strong></td>
<td>C:/Users/steffi/My Documents/R Projects/mydata.csv</td>
</tr>
<tr class="odd">
<td><strong>MAC</strong></td>
<td>/users/steffi/Documents/R Projects/mydata.csv</td>
</tr>
</tbody>
</table>
</div>
<div class="fragment note absolute" style="top: 28%; left: 75%; ">
<p>Full location, folders and filename</p>
</div>
<div class="fragment">
<h3 class="spacer" id="relative-paths"><strong>Relative</strong> Paths</h3>
<div class="small left">
<table class="caption-top">
<colgroup>
<col style="width: 26%">
<col style="width: 73%">
</colgroup>
<thead>
<tr class="header">
<th>Path</th>
<th>Where to look</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>mydata.csv</td>
<td>Here (current directory)</td>
</tr>
<tr class="even">
<td>../mydata.csv</td>
<td>Go up one directory (../)</td>
</tr>
<tr class="odd">
<td>data/mydata.csv</td>
<td>Stay here, go into “data” folder (data/)</td>
</tr>
<tr class="even">
<td>../data/mydata.csv</td>
<td>Go up one directory (../), then into “data” folder (data/)</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="fragment note absolute" style="top: 65%; left: 75%; ">
<p>Only <em>relative</em> info<br>
Use relative symbols (e.g., <code>../</code>)</p>
</div>
<div class="note fragment absolute" style="left: 25%; bottom: -5%; ">
<p>With RStudio ‘Projects’ only need to use <strong>relative</strong> paths</p>
</div>
</section>
<section id="keep-yourself-organized" class="slide level2">
<h2>Keep yourself organized</h2>
<h3 id="for-simple-projects">For simple projects</h3>
<ul>
<li>Create an ‘RStudio Project’ for each Project <!--(Chapter, Thesis, etc.) --></li>
<li>Create a specific “data” folder within each project (one per project)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" data-code-line-numbers="1,3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href=""></a><span class="sc">-</span> Prospect Lake Quality                 <span class="co"># Project Folder</span></span>
<span id="cb6-2"><a href=""></a>    <span class="sc">-</span> prospect_analysis.R</span>
<span id="cb6-3"><a href=""></a>    <span class="sc">-</span> data                              <span class="co"># Data Folder   </span></span>
<span id="cb6-4"><a href=""></a>        <span class="sc">-</span> prospect_data_2017<span class="dv">-01</span><span class="fl">-01.</span>csv</span>
<span id="cb6-5"><a href=""></a>        <span class="sc">-</span> prospect_data_2017<span class="dv">-02</span><span class="fl">-01.</span>csv</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<ul>
<li>Use <strong>relative</strong> paths to refer to this folder</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href=""></a>d <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/prospect_data_2017-01-01.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section></section>
<section>
<section id="lets-load-some-data" class="title-slide slide level1 center">
<h1>Let’s Load Some Data!</h1>

</section>
<section id="your-turn-load-some-data" class="slide level2 space-list">
<h2>Your turn: Load some data</h2>
<p><strong>Working with <a href="https://steffilazerte.ca/workshop-dealing-with-data/data/water_cleaned.xlsx"><code>water_cleaned.xlsx</code></a></strong></p>
<div class="columns">
<div class="column" style="width:60%;">
<ol type="1">
<li>Load the package</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href=""></a><span class="fu">library</span>(readxl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li>Read in the Excel file and assign to object <code>water</code></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"data/water_cleaned.xlsx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="3" type="1">
<li><p>Use <code>head()</code> and <code>tail()</code> functions to look at the data<br>
<span class="hang small">e.g., <code>head(water)</code> and <code>tail(water)</code></span></p></li>
<li><p>Click on the <code>water</code> object in your “Environment” pane to look at the whole data set</p></li>
</ol>
</div><div class="column" style="width:40%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figures/tip_file_nav.gif" alt="GIF showing the dropdown menu that appears when you hit the 'tab' key inside the quotes when typing file locations"></p>
<figcaption>Use the <em>‘tab’</em> key in RStudio when typing in the file name for auto-complete</figcaption>
</figure>
</div>
</div></div>
</section>
<section id="your-turn-load-some-data-1" class="slide level2" data-visibility="visible">
<h2>Your turn: Load some data</h2>
<div class="small">
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href=""></a><span class="fu">library</span>(readxl)</span>
<span id="cb10-2"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"data/water_cleaned.xlsx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href=""></a><span class="fu">head</span>(water)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 6
  river       site        element amount temperature  year
  &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;    &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;
1 Grasse      Up stream   Al      0.606       10.9    2019
2 Grasse      Mid stream  Al      0.425        8.68   2020
3 Grasse      Down stream Al      0.194        8.75   2021
4 Oswegatchie Up stream   Al      1            0.791  2022
5 Oswegatchie Mid stream  Al      0.161        9.32   2023
6 Oswegatchie Down stream Al      0.0333      10.6    2019</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href=""></a><span class="fu">tail</span>(water)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 6
  river     site        element amount temperature  year
  &lt;chr&gt;     &lt;chr&gt;       &lt;chr&gt;    &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;
1 Raquette  Up stream   Zr       0.333       14.0   2023
2 Raquette  Mid stream  Zr       0.111        7.61  2019
3 Raquette  Down stream Zr      NA            7.36  2020
4 St. Regis Up stream   Zr       0.889        7.94  2021
5 St. Regis Mid stream  Zr       0.778        9.28  2022
6 St. Regis Down stream Zr       0.667       10.1   2023</code></pre>
</div>
</div>
</div>
<p><img data-src="figures/dataset.png" class="absolute" style="top: 0px; right: 0px; width: 45%; " alt="Screenshot of the data shown in the RStudio viewer pane"></p>
</section>
<section id="how-do-i-know-which-function-to-use" class="slide level2 space-list">
<h2>How do I know which function to use?</h2>
<h3 id="program-specific-files">Program-specific files</h3>
<ul>
<li>Files which only normally open in a particular program (e.g., Excel)</li>
<li><strong>Load with function from specific package (e.g.&nbsp;<code>read_excel</code> from readxl package)</strong></li>
</ul>
<h3 id="text-files">Text files</h3>
<ul>
<li>Files which open in notepad</li>
<li>Files which open in RStudio when you click on them in the Files Pane</li>
<li><strong>Load with function from readr package (e.g.&nbsp;<code>read_csv()</code>, <code>read_tsv()</code>, etc.)</strong></li>
</ul>
<h3 id="look-at-the-file-extension">Look at the file extension:</h3>
<ul>
<li><a href="https://steffilazerte.ca/workshop-dealing-with-data/data/water_cleaned.xlsx"><code>water_cleaned.xlsx</code></a> <i class="fa-solid fa-arrow-right" aria-label="arrow-right"></i> Excel file <i class="fa-solid fa-arrow-right" aria-label="arrow-right"></i> <code>read_excel()</code></li>
<li><a href="https://steffilazerte.ca/workshop-dealing-with-data/data/water_raw.csv"><code>water_raw.csv</code></a> <i class="fa-solid fa-arrow-right" aria-label="arrow-right"></i> Comma-separated-variables <i class="fa-solid fa-arrow-right" aria-label="arrow-right"></i> <code>read_csv()</code></li>
</ul>
<p><span class="note absolute fragment" style="left: 80%; bottom: 10%; width: 30%; ">But sometimes not clear…</span></p>
</section>
<section id="how-do-i-know-which-function-to-use-1" class="slide level2 space-list">
<h2>How do I know which function to use?</h2>
<h3 id="working-with-master_moch.txt">Working with: <a href="https://steffilazerte.ca/workshop-dealing-with-data/data/master_moch.txt"><code>master_moch.txt</code></a></h3>
<ul>
<li>In lower right-hand pane, click on <strong>Files</strong></li>
<li>Click on <strong>data</strong> folder</li>
<li>Click on <strong>master_moch.txt</strong></li>
<li>Click “View File” <span class="small">(if asked)</span></li>
</ul>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>ID  region  hab freq    freq.sd p.notes
MCB02   kam 0.5266879074    3.9806600009    3.9806600009    0.4592592593
MCB03   kam -0.9707703735   4.1090031783    4.1090031783    0.5
MCB04   kam -0.9707703735   4.2463067674    4.2463067674    0.5151515152</code></pre>
</div>
</div>
<p><span class="note absolute" style="bottom: 8%; ">This <strong>does not</strong> read the file into R, but only shows you the contents as text.</span></p>
<p><span class="note fragment absolute" style="bottom: -5%; width: 60%; ">Hmm, not comma-separated, maybe tab-separated?</span></p>
</section>
<section id="how-do-i-know-which-function-to-use-2" class="slide level2">
<h2>How do I know which function to use?</h2>
<h3 id="peak">Peak:</h3>
<ul>
<li>Pick a read function with your best guess (<code>read_csv()</code> is a good start)</li>
<li>Use <code>n_max</code> to read only first few rows</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href=""></a><span class="fu">read_csv</span>(<span class="st">"data/master_moch.txt"</span>, <span class="at">n_max =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 1
  `ID\tregion\thab\tfreq\tfreq.sd\tp.notes`                            
  &lt;chr&gt;                                                                
1 "MCB02\tkam\t0.5266879074\t3.9806600009\t3.9806600009\t0.4592592593" 
2 "MCB03\tkam\t-0.9707703735\t4.1090031783\t4.1090031783\t0.5"         
3 "MCB04\tkam\t-0.9707703735\t4.2463067674\t4.2463067674\t0.5151515152"</code></pre>
</div>
</div>
<div class="spacer">
<p><span class="note"><code>\t</code> means tab, so this is tab-separated data</span></p>
</div>
</section>
<section id="how-do-i-know-what-to-use" class="slide level2">
<h2>How do I know what to use?</h2>
<h3 id="peak-1">Peak:</h3>
<ul>
<li>Try again with <code>read_tsv()</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href=""></a><span class="fu">read_tsv</span>(<span class="st">"data/master_moch.txt"</span>, <span class="at">n_max =</span> <span class="dv">3</span>)  <span class="co"># note change in function!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 6
  ID    region    hab  freq freq.sd p.notes
  &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
1 MCB02 kam     0.527  3.98    3.98   0.459
2 MCB03 kam    -0.971  4.11    4.11   0.5  
3 MCB04 kam    -0.971  4.25    4.25   0.515</code></pre>
</div>
</div>
<div class="spacer">
<p><span class="note">Excellent!</span></p>
</div>
</section></section>
<section>
<section id="specifics-of-loading-functions" class="title-slide slide level1 center">
<h1>Specifics of loading functions</h1>

</section>
<section id="col_names" class="slide level2 space-list">
<h2><code>col_names</code></h2>
<p><strong>Working with <a href="https://steffilazerte.ca/workshop-dealing-with-data/data/geolocators.csv">Geolocator data</a></strong></p>
<p>
</p><div class="columns">
<div class="column" style="width:60%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href=""></a>my_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/geolocators.csv"</span>)</span>
<span id="cb20-2"><a href=""></a>my_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 20 × 2
   `02/05/11 22:29:59`  `64`
   &lt;chr&gt;               &lt;dbl&gt;
 1 02/05/11 22:31:59      64
 2 02/05/11 22:33:59      38
 3 02/05/11 22:35:59      38
 4 02/05/11 22:37:59      34
 5 02/05/11 22:39:59      30
 6 02/05/11 22:41:59      34
 7 02/05/11 22:43:59      40
 8 02/05/11 22:45:59      46
 9 02/05/11 22:47:59      48
10 02/05/11 22:49:59      46
# ℹ 10 more rows</code></pre>
</div>
</div>
<p>Oops?</p>
</div><div class="column fragment" style="width:40%;">
<ul>
<li><code>read_csv</code>, <code>read_tsv</code>, etc. assume that the first row contains the column names</li>
<li>This file doesn’t have headers</li>
</ul>
</div></div>
</section>
<section id="col_names-1" class="slide level2">
<h2><code>col_names</code></h2>
<p><strong>Working with <a href="https://steffilazerte.ca/workshop-dealing-with-data/data/geolocators.csv">Geolocator data</a></strong></p>
<p>
</p><div class="columns">
<div class="column" style="width:48%;">
<h3 id="declare-no-headings">Declare no headings</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb22" data-code-line-numbers="2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href=""></a>my_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/geolocators.csv"</span>, </span>
<span id="cb22-2"><a href=""></a>                    <span class="at">col_names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb22-3"><a href=""></a>my_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21 × 2
   X1                   X2
   &lt;chr&gt;             &lt;dbl&gt;
 1 02/05/11 22:29:59    64
 2 02/05/11 22:31:59    64
 3 02/05/11 22:33:59    38
 4 02/05/11 22:35:59    38
 5 02/05/11 22:37:59    34
 6 02/05/11 22:39:59    30
 7 02/05/11 22:41:59    34
 8 02/05/11 22:43:59    40
 9 02/05/11 22:45:59    46
10 02/05/11 22:47:59    48
# ℹ 11 more rows</code></pre>
</div>
</div>
</div><div class="column" style="width:52%;">
<div class="fragment">
<h3 id="name-headings">Name headings</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb24" data-code-line-numbers="2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href=""></a>my_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/geolocators.csv"</span>, </span>
<span id="cb24-2"><a href=""></a>                    <span class="at">col_names =</span> <span class="fu">c</span>(<span class="st">"date"</span>, <span class="st">"light"</span>))</span>
<span id="cb24-3"><a href=""></a>my_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21 × 2
   date              light
   &lt;chr&gt;             &lt;dbl&gt;
 1 02/05/11 22:29:59    64
 2 02/05/11 22:31:59    64
 3 02/05/11 22:33:59    38
 4 02/05/11 22:35:59    38
 5 02/05/11 22:37:59    34
 6 02/05/11 22:39:59    30
 7 02/05/11 22:41:59    34
 8 02/05/11 22:43:59    40
 9 02/05/11 22:45:59    46
10 02/05/11 22:47:59    48
# ℹ 11 more rows</code></pre>
</div>
</div>
</div>
</div></div>
</section>
<section id="skip-info-rows-before-data" class="slide level2">
<h2><code>skip</code> info rows before data</h2>
<p><strong>Working with <a href="https://steffilazerte.ca/workshop-dealing-with-data/data/grain_size.txt">Grain size data</a></strong></p>
<div class="cell" data-highlight.output="[2,4,5,6]">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href=""></a>my_data <span class="ot">&lt;-</span> <span class="fu">read_tsv</span>(<span class="st">"data/grain_size.txt"</span>)</span>
<span id="cb26-2"><a href=""></a>my_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 36 × 7
   `DATA DOWNLOAD: 2015-09-23` ...2  ...3        ...4     ...5  ...6  ...7 
   &lt;chr&gt;                       &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
 1 SYSTEM 001                  &lt;NA&gt;  &lt;NA&gt;        &lt;NA&gt;     &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt; 
 2 LOGGER X                    &lt;NA&gt;  &lt;NA&gt;        &lt;NA&gt;     &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt; 
 3 lab_num                     CSP   sample_num  depth_lb csa   msa   fsa  
 4 3177                        CSP01 CSP01-P-1-1 4        13.04 17.37 8.19 
 5 3178                        CSP01 CSP01-P-1-2 12       10.74 16.9  7.92 
 6 3179                        CSP01 CSP01-P-1-3 35       12.11 17.75 6.99 
 7 3180                        CSP01 CSP01-P-1-4 53       17.61 18.16 6.29 
 8 3181                        CSP01 CSP01-P-1-5 83       21.05 18.38 6.26 
 9 3182                        CSP01 CSP01-P-1-6 105      19.02 18.43 6.28 
10 3183                        CSP08 CSP08-P-1-1 10       11.6  17.14 8.18 
# ℹ 26 more rows</code></pre>
</div>
</div>
</section>
<section id="skip-info-rows-before-data-1" class="slide level2">
<h2><code>skip</code> info rows before data</h2>
<p><strong>Working with <a href="https://steffilazerte.ca/workshop-dealing-with-data/data/grain_size.txt">Grain size data</a></strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href=""></a>my_data <span class="ot">&lt;-</span> <span class="fu">read_tsv</span>(<span class="st">"data/grain_size.txt"</span>)</span>
<span id="cb28-2"><a href=""></a>my_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="columns">
<div class="column" style="width:30%;">
<p><strong>Look at the file:</strong></p>
<ul>
<li>Click on <strong>Files</strong> tab</li>
<li>Click on <strong>data</strong> folder</li>
<li>Click on <strong>grain_size.txt</strong></li>
<li>Click <strong>“View file”</strong> <span class="small">(if asked)</span></li>
</ul>
</div><div class="column fragment" style="width:60%;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>DATA DOWNLOAD: 2015-09-23                       
SYSTEM 001                      
LOGGER X                        
lab_num CSP sample_num  depth_lb    csa msa fsa
3177    CSP01   CSP01-P-1-1 4   13.04   17.37   8.19
3178    CSP01   CSP01-P-1-2 12  10.74   16.9    7.92
3179    CSP01   CSP01-P-1-3 35  12.11   17.75   6.99
3180    CSP01   CSP01-P-1-4 53  17.61   18.16   6.29
3181    CSP01   CSP01-P-1-5 83  21.05   18.38   6.26</code></pre>
</div>
</div>
</div></div>
<p><span class="note absolute fragment" style="left: 50%; bottom: 10%; "><strong>Ah ha!</strong><br>Metadata was stored at the top of the file</span></p>
</section>
<section id="skip-info-rows-before-data-2" class="slide level2">
<h2><code>skip</code> info rows before data</h2>
<p><strong>Working with <a href="https://steffilazerte.ca/workshop-dealing-with-data/data/grain_size.txt">Grain size data</a></strong></p>
<ul>
<li>Add <code>skip = 3</code> to skip the first three rows</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href=""></a>my_data <span class="ot">&lt;-</span> <span class="fu">read_tsv</span>(<span class="st">"data/grain_size.txt"</span>, <span class="at">skip =</span> <span class="dv">3</span>)</span>
<span id="cb30-2"><a href=""></a>my_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 33 × 7
   lab_num CSP   sample_num  depth_lb   csa   msa   fsa
     &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1    3177 CSP01 CSP01-P-1-1        4 13.0  17.4   8.19
 2    3178 CSP01 CSP01-P-1-2       12 10.7  16.9   7.92
 3    3179 CSP01 CSP01-P-1-3       35 12.1  17.8   6.99
 4    3180 CSP01 CSP01-P-1-4       53 17.6  18.2   6.29
 5    3181 CSP01 CSP01-P-1-5       83 21.0  18.4   6.26
 6    3182 CSP01 CSP01-P-1-6      105 19.0  18.4   6.28
 7    3183 CSP08 CSP08-P-1-1       10 11.6  17.1   8.18
 8    3184 CSP08 CSP08-P-1-2       27 15.4  16.2   6.76
 9    3185 CSP08 CSP08-P-1-3       90 14.9  15.8   7.12
10    3186 CSP02 CSP02-P-1-1        5  8.75  8.64  3.41
# ℹ 23 more rows</code></pre>
</div>
</div>
<p><span class="note absolute" style="left: 65%; bottom: 40%; ">Much better!</span></p>
</section>
<section id="your-turn-load-this-data-set" class="slide level2">
<h2>Your turn: Load this data set</h2>
<p><strong>Load Data: <a href="https://steffilazerte.ca/workshop-dealing-with-data/data/Sta%20A%20Data%202006-11-07.dmp"><code>Sta A Data 2006-11-07.dmp</code></a></strong></p>
<ol type="1">
<li>Look at the file</li>
<li>Decide which R function to use based on delimiter <span class="small">(comma, space, or tab?)</span></li>
<li>Any other options need to be specified?</li>
</ol>
<h3 id="it-should-look-like-this">It should look like this:</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 19 × 7
  StartDate Time     Frequency `Rate/Temp`   Pwr Ant      SD
      &lt;dbl&gt; &lt;time&gt;       &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;
1     39022 17:15:36      150.        34.8   175 M0        0
2     39022 17:19:14      148.        19.2    72 M0        0
3     39022 17:19:25      148.        19.7   194 M1        0
4     39022 17:20:04      149.        33.8   104 M0        0
5     39022 17:20:17      149.        33.7   152 M1        0
6     39022 17:20:57      150.        34.2   188 M0        0
7     39022 17:22:50      148.         9.8   188 M0        0
# ℹ 12 more rows</code></pre>
</div>
</div>
<p><span class="note absolute" style="left: 80%; bottom: 17%; width: 40%; "><strong>Too Easy?</strong><br>Load some of your own tricky data</span> <span class="note absolute" style="left: 70%; bottom: -15%; width: 60%; "><strong>OR</strong><br>Try to load the second sheet of <code>water_cleaned.xlsx</code> and rename the columns in the same step<br><span class="small">(see <code>?read_excel</code>)</span></span></p>
</section>
<section id="your-turn-load-this-data-set-1" class="slide level2" data-visibility="visible">
<h2>Your turn: Load this data set</h2>
<p><strong>Load Data: <a href="https://steffilazerte.ca/workshop-dealing-with-data/data/Sta%20A%20Data%202006-11-07.dmp"><code>Sta A Data 2006-11-07.dmp</code></a></strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href=""></a>telemetry <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/Sta A Data 2006-11-07.dmp"</span>, <span class="at">skip =</span> <span class="dv">2</span>)</span>
<span id="cb33-2"><a href=""></a>telemetry</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 19 × 7
  StartDate Time     Frequency `Rate/Temp`   Pwr Ant      SD
      &lt;dbl&gt; &lt;time&gt;       &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;
1     39022 17:15:36      150.        34.8   175 M0        0
2     39022 17:19:14      148.        19.2    72 M0        0
3     39022 17:19:25      148.        19.7   194 M1        0
4     39022 17:20:04      149.        33.8   104 M0        0
5     39022 17:20:17      149.        33.7   152 M1        0
6     39022 17:20:57      150.        34.2   188 M0        0
7     39022 17:22:50      148.         9.8   188 M0        0
# ℹ 12 more rows</code></pre>
</div>
</div>
</section>
<section id="your-turn-load-this-data-set-2" class="slide level2" data-visibility="visible">
<h2>Your turn: Load this data set</h2>
<p><strong>Too Easy?</strong></p>
<ul>
<li>Use <code>sheet</code> argument to access specific sheet <span class="small">(<code>excel_sheets()</code> lists them all)</span></li>
<li>skip the first <em>two</em> rows (including the headers)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href=""></a><span class="fu">excel_sheets</span>(<span class="st">"data/water_cleaned.xlsx"</span>)  <span class="co"># Or look yourself ;)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Sheet1"      "Oswegatchie"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href=""></a><span class="fu">read_excel</span>(<span class="st">"data/water_cleaned.xlsx"</span>, <span class="at">sheet =</span> <span class="st">"Oswegatchie"</span>, <span class="at">skip =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 75 × 6
   river       site        element  amount temperature  year
   &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;     &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;
 1 Oswegatchie Up stream   Al       1            0.791  2022
 2 Oswegatchie Mid stream  Al       0.161        9.32   2023
 3 Oswegatchie Down stream Al       0.0333      10.6    2019
 4 Oswegatchie Up stream   Ba       0.357        3.73   2019
 5 Oswegatchie Mid stream  Ba       0.560        9.66   2020
 6 Oswegatchie Down stream Ba       1            8.56   2021
 7 Oswegatchie Up stream   Br       0.107       20.9    2021
 8 Oswegatchie Mid stream  Br       0.857       10.8    2022
 9 Oswegatchie Down stream Br       1            4.79   2023
10 Oswegatchie Up stream   Ca      NA            4.76   2023
# ℹ 65 more rows</code></pre>
</div>
</div>
</section></section>
<section>
<section id="looking-for-problems-1" class="title-slide slide level1 center">
<h1>Looking for problems</h1>

</section>
<section id="look-at-the-data" class="slide level2">
<h2>Look at the data</h2>
<ul>
<li>Make sure columns as expected <span class="small">(correctly assigned file format)</span></li>
<li>Make sure no extra lines above the data <span class="small">(should we have used a skip?)</span></li>
<li>Make sure column names look appropriate</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href=""></a><span class="fu">library</span>(palmerpenguins)</span>
<span id="cb39-2"><a href=""></a>penguins</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 8
   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g sex     year
   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt; &lt;fct&gt;  &lt;int&gt;
 1 Adelie  Torgersen           39.1          18.7               181        3750 male    2007
 2 Adelie  Torgersen           39.5          17.4               186        3800 female  2007
 3 Adelie  Torgersen           40.3          18                 195        3250 female  2007
 4 Adelie  Torgersen           NA            NA                  NA          NA &lt;NA&gt;    2007
 5 Adelie  Torgersen           36.7          19.3               193        3450 female  2007
 6 Adelie  Torgersen           39.3          20.6               190        3650 male    2007
 7 Adelie  Torgersen           38.9          17.8               181        3625 female  2007
 8 Adelie  Torgersen           39.2          19.6               195        4675 male    2007
 9 Adelie  Torgersen           34.1          18.1               193        3475 &lt;NA&gt;    2007
10 Adelie  Torgersen           42            20.2               190        4250 &lt;NA&gt;    2007
# ℹ 334 more rows</code></pre>
</div>
</div>
</section>
<section id="look-at-the-data-1" class="slide level2">
<h2>Look at the data</h2>
<ul>
<li>Did the whole data set load?</li>
<li>Are there extra blank lines at the end of the data?</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href=""></a><span class="fu">tail</span>(penguins)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 8
  species   island bill_length_mm bill_depth_mm flipper_length_mm body_mass_g sex     year
  &lt;fct&gt;     &lt;fct&gt;           &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt; &lt;fct&gt;  &lt;int&gt;
1 Chinstrap Dream            45.7          17                 195        3650 female  2009
2 Chinstrap Dream            55.8          19.8               207        4000 male    2009
3 Chinstrap Dream            43.5          18.1               202        3400 female  2009
4 Chinstrap Dream            49.6          18.2               193        3775 male    2009
5 Chinstrap Dream            50.8          19                 210        4100 male    2009
6 Chinstrap Dream            50.2          18.7               198        3775 female  2009</code></pre>
</div>
</div>
</section>
<section id="skim-the-data" class="slide level2">
<h2><code>skim()</code> the data</h2>
<h3 class="spacer" id="skim-is-from-skimr"><code>skim()</code> is from <code>skimr</code></h3>
<div class="columns">
<div class="column small space-list" style="width:25%;">
<ul>
<li>Are the formats correct?
<ul>
<li>numbers (<code>numeric</code>),</li>
<li>text (<code>character</code>)</li>
<li>date (<code>date</code>, <code>POSIXct</code>, <code>datetime</code>)</li>
<li>categories (<code>factor</code>)</li>
</ul></li>
<li>Are values appropriate?
<ul>
<li>Should there be <code>NA</code>s?</li>
</ul></li>
<li>Are there any typos?</li>
<li>Number of rows expected?</li>
</ul>
</div><div class="small column" style="width:75%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href=""></a><span class="fu">library</span>(skimr)</span>
<span id="cb43-2"><a href=""></a><span class="fu">skim</span>(penguins)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>── Data Summary ────────────────────────
                           Values  
Name                       penguins
Number of rows             344     
Number of columns          8       
_______________________            
Column type frequency:             
  factor                   3       
  numeric                  5       
________________________           
Group variables            None    

── Variable type: factor ───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  skim_variable n_missing complete_rate ordered n_unique top_counts                 
1 species               0         1     FALSE          3 Ade: 152, Gen: 124, Chi: 68
2 island                0         1     FALSE          3 Bis: 168, Dre: 124, Tor: 52
3 sex                  11         0.968 FALSE          2 mal: 168, fem: 165         

── Variable type: numeric ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  skim_variable     n_missing complete_rate   mean      sd     p0    p25    p50    p75   p100 hist 
1 bill_length_mm            2         0.994   43.9   5.46    32.1   39.2   44.4   48.5   59.6 ▃▇▇▆▁
2 bill_depth_mm             2         0.994   17.2   1.97    13.1   15.6   17.3   18.7   21.5 ▅▅▇▇▂
3 flipper_length_mm         2         0.994  201.   14.1    172    190    197    213    231   ▂▇▃▅▂
4 body_mass_g               2         0.994 4202.  802.    2700   3550   4050   4750   6300   ▃▇▆▃▂
5 year                      0         1     2008.    0.818 2007   2007   2008   2009   2009   ▇▁▇▁▇</code></pre>
</div>
</div>
</div></div>
<p><img data-src="figures/hex_skimr.png" class="absolute" style="top: 0px; right: 0px; width: 16%; " alt="Hex logo for the skimr R package"></p>
</section>
<section id="count-categories" class="slide level2">
<h2><code>count()</code> categories</h2>
<h3 class="spacer" id="count-is-from-dplyr"><code>count()</code> is from <code>dplyr</code>*</h3>
<ul>
<li>Check for sample sizes and potential typos in categorical columns</li>
<li>Assess missing values</li>
</ul>
<div class="columns">
<div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href=""></a><span class="fu">count</span>(penguins, species)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  species       n
  &lt;fct&gt;     &lt;int&gt;
1 Adelie      152
2 Chinstrap    68
3 Gentoo      124</code></pre>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href=""></a><span class="fu">count</span>(penguins, island)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  island        n
  &lt;fct&gt;     &lt;int&gt;
1 Biscoe      168
2 Dream       124
3 Torgersen    52</code></pre>
</div>
</div>
</div><div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href=""></a><span class="fu">count</span>(penguins, sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  sex        n
  &lt;fct&gt;  &lt;int&gt;
1 female   165
2 male     168
3 &lt;NA&gt;      11</code></pre>
</div>
</div>
</div></div>
<p><img data-src="figures/hex_dplyr.png" class="absolute" style="top: 0px; right: 0px; width: 16%; " alt="Hex logo for the dplyr R package"> <span class="footnote">* part of the <code>tidyverse</code></span></p>
</section>
<section id="plot-categories" class="slide level2">
<h2>Plot categories</h2>
<div class="spacer">
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href=""></a><span class="co"># Replace COLUMN with the column name to explore</span></span>
<span id="cb51-2"><a href=""></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, <span class="fu">aes</span>(<span class="at">x =</span> COLUMN)) <span class="sc">+</span> </span>
<span id="cb51-3"><a href=""></a>  <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="columns" style="font-size: 75%">
<div class="column" style="width:33%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="3_loading_and_cleaning_files/figure-revealjs/unnamed-chunk-29-1.png" width="800"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:33%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="3_loading_and_cleaning_files/figure-revealjs/unnamed-chunk-30-1.png" width="800"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:33%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="3_loading_and_cleaning_files/figure-revealjs/unnamed-chunk-31-1.png" width="800"></p>
</figure>
</div>
</div>
</div>
</div></div>
<p><img data-src="figures/hex_ggplot2.png" class="absolute" style="top: 0px; right: 0px; width: 16%; " alt="Hex logo for the ggplot2 R package"> <span class="footnote">* part of the <code>tidyverse</code></span></p>
</section>
<section id="plot-numbers" class="slide level2">
<h2>Plot numbers</h2>
<div class="spacer">
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href=""></a><span class="co"># Replace COLUMN with the column name to explore</span></span>
<span id="cb52-2"><a href=""></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, <span class="fu">aes</span>(<span class="at">x =</span> COLUMN)) <span class="sc">+</span> </span>
<span id="cb52-3"><a href=""></a>  <span class="fu">geom_histogram</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div style="font-size: 75%">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="3_loading_and_cleaning_files/figure-revealjs/unnamed-chunk-33-1.png" class="quarto-figure quarto-figure-center" style="width:80.0%"></p>
</figure>
</div>
</div>
</div>
</div>
<p><img data-src="figures/hex_ggplot2.png" class="absolute" style="top: 0px; right: 0px; width: 16%; " alt="Hex logo for the ggplot2 R package"> <span class="footnote">* part of the <code>tidyverse</code></span></p>
</section></section>
<section>
<section id="example-of-problematic-data" class="title-slide slide level1 center">
<h1>Example of problematic data</h1>

</section>
<section id="look-at-the-data-2" class="slide level2">
<h2>Look at the data</h2>
<p><strong>Working with: <a href="https://steffilazerte.ca/workshop-dealing-with-data/data/water_raw.csv"><code>water_raw.csv</code></a></strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/water_raw.csv"</span>)</span>
<span id="cb53-2"><a href=""></a>water</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 300 × 7
   `River Name` Site        Ele       Amo `Temperature C°`  Year Wea   
   &lt;chr&gt;        &lt;chr&gt;       &lt;chr&gt;   &lt;dbl&gt;            &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; 
 1 Grasse       Up stream   Al     0.606            10.9    2019 snowy 
 2 Grasse       Mid stream  Al     0.425             8.68   2020 cloudy
 3 Grase        Down stream Al     0.194             8.75   2021 cloudy
 4 Oswegatchie  Up stream   Al     1                 0.791  2022 sunny 
 5 Oswegatchie  Mid stream  Al     0.161             9.32   2023 snowy 
 6 Oswegatchie  Down stream Al     0.0333           10.6    2019 wet   
 7 Raquette     Up stream   Al     0.292             4.01   2020 snowy 
 8 Raquette     Mid stream  Al     0.0389            5.96   2021 sunny 
 9 Raquette     Down stream Al    NA                 6.21   2022 cloudy
10 St. Regis    Up stream   Al     0.681             8.02   2023 wet   
# ℹ 290 more rows</code></pre>
</div>
</div>
<ul>
<li>Column names are not R-friendly (<code>River Name</code> and <code>Temperature C°</code>) or obvious (what is <code>Ele</code>?)</li>
<li>At least one typo in River (<code>Grase</code> should be <code>Grasse</code>)</li>
</ul>
</section>
<section id="looking-for-problems-2" class="slide level2">
<h2>Looking for problems</h2>
<h3 id="your-turn">Your Turn!</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/water_raw.csv"</span>)</span>
<span id="cb55-2"><a href=""></a>water</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 300 × 7
   `River Name` Site        Ele       Amo `Temperature C°`  Year Wea   
   &lt;chr&gt;        &lt;chr&gt;       &lt;chr&gt;   &lt;dbl&gt;            &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; 
 1 Grasse       Up stream   Al     0.606            10.9    2019 snowy 
 2 Grasse       Mid stream  Al     0.425             8.68   2020 cloudy
 3 Grase        Down stream Al     0.194             8.75   2021 cloudy
 4 Oswegatchie  Up stream   Al     1                 0.791  2022 sunny 
 5 Oswegatchie  Mid stream  Al     0.161             9.32   2023 snowy 
 6 Oswegatchie  Down stream Al     0.0333           10.6    2019 wet   
 7 Raquette     Up stream   Al     0.292             4.01   2020 snowy 
 8 Raquette     Mid stream  Al     0.0389            5.96   2021 sunny 
 9 Raquette     Down stream Al    NA                 6.21   2022 cloudy
10 St. Regis    Up stream   Al     0.681             8.02   2023 wet   
# ℹ 290 more rows</code></pre>
</div>
</div>
<ul>
<li><code>skim()</code> the data</li>
<li><code>count()</code> some columns</li>
<li>Perhaps make some <code>ggplot()</code>s</li>
</ul>
<p><span class="note absolute" style="left: 70%; bottom: 10%; ">Find any problems?</span></p>
</section>
<section id="skim-the-data-1" class="slide level2" data-visibility="visible">
<h2><code>skim()</code> the data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href=""></a><span class="fu">library</span>(skimr)</span>
<span id="cb57-2"><a href=""></a><span class="fu">skim</span>(water)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>── Data Summary ────────────────────────
                           Values
Name                       water 
Number of rows             300   
Number of columns          7     
_______________________          
Column type frequency:           
  character                4     
  numeric                  3     
________________________         
Group variables            None  

── Variable type: character ──────────────────────────────────────────────────────────────────────────────────
  skim_variable n_missing complete_rate min max empty n_unique whitespace
1 River Name            0             1   5  11     0        7          0
2 Site                  0             1   9  11     0        3          0
3 Ele                   0             1   1   2     0       25          0
4 Wea                   0             1   3   6     0        4          0

── Variable type: numeric ────────────────────────────────────────────────────────────────────────────────────
  skim_variable  n_missing complete_rate     mean     sd         p0      p25      p50      p75   p100 hist 
1 Amo                   39          0.87    0.429  0.299    0.00656    0.169    0.379    0.643    1   ▇▆▆▃▃
2 Temperature C°         0          1       9.17  11.5    -99          7.54    10.3     12.7     20.9 ▁▁▁▁▇
3 Year                   0          1    2021      1.42  2019       2020     2021     2022     2023   ▇▇▇▇▇</code></pre>
</div>
</div>
</section>
<section id="count-categories-1" class="slide level2" data-visibility="visible">
<h2><code>count()</code> categories</h2>
<div class="columns">
<div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href=""></a><span class="fu">count</span>(water, <span class="st">`</span><span class="at">River Name</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 2
  `River Name`     n
  &lt;chr&gt;        &lt;int&gt;
1 Grase            1
2 Grasse          73
3 Oswegatchie     75
4 Raquette        74
5 St. Regis       75
6 grasse           1
7 raquette         1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href=""></a><span class="fu">count</span>(water, Wea)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 2
  Wea        n
  &lt;chr&gt;  &lt;int&gt;
1 cloudy    84
2 snowy     61
3 sunny     85
4 wet       70</code></pre>
</div>
</div>
</div><div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href=""></a><span class="fu">count</span>(water, Site)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  Site            n
  &lt;chr&gt;       &lt;int&gt;
1 Down stream   100
2 Mid stream    100
3 Up stream     100</code></pre>
</div>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href=""></a><span class="fu">count</span>(water, Ele)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 25 × 2
   Ele       n
   &lt;chr&gt; &lt;int&gt;
 1 Al       12
 2 Ba       12
 3 Br       12
 4 Ca       12
 5 Ce       12
 6 Cu       12
 7 Dy       12
 8 Er       12
 9 Fe       12
10 Gd       12
# ℹ 15 more rows</code></pre>
</div>
</div>
</div></div>
</section>
<section id="plot-categories-1" class="slide level2" data-visibility="visible">
<h2>Plot categories</h2>
<div class="spacer">
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href=""></a><span class="co"># Replace COLUMN with the column name to explore</span></span>
<span id="cb67-2"><a href=""></a><span class="fu">ggplot</span>(<span class="at">data =</span> water, <span class="fu">aes</span>(<span class="at">x =</span> COLUMN)) <span class="sc">+</span> </span>
<span id="cb67-3"><a href=""></a>  <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div style="font-size: 75%">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="3_loading_and_cleaning_files/figure-revealjs/unnamed-chunk-40-1.png" class="quarto-figure quarto-figure-center" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="plot-numbers-1" class="slide level2" data-visibility="visible">
<h2>Plot numbers</h2>
<div class="spacer">
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href=""></a><span class="co"># Replace COLUMN with the column name to explore</span></span>
<span id="cb68-2"><a href=""></a><span class="fu">ggplot</span>(<span class="at">data =</span> water, <span class="fu">aes</span>(<span class="at">x =</span> COLUMN)) <span class="sc">+</span> </span>
<span id="cb68-3"><a href=""></a>  <span class="fu">geom_histogram</span>()()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div style="font-size: 75%">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="3_loading_and_cleaning_files/figure-revealjs/unnamed-chunk-42-1.png" class="quarto-figure quarto-figure-center" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</section></section>
<section>
<section id="fixing-problems-1" class="title-slide slide level1 center">
<h1>Fixing problems</h1>

</section>
<section id="cleaning-column-names" class="slide level2">
<h2>Cleaning column names</h2>
<h3 class="spacer" id="clean_names-is-from-janitor"><code>clean_names()</code> is from <code>janitor</code>*</h3>
<p><span class="footnote">* <em>not</em> part of the <code>tidyverse</code> but <code>tidyverse</code>-orientated</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href=""></a><span class="fu">library</span>(janitor)</span>
<span id="cb69-2"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">clean_names</span>(water)</span>
<span id="cb69-3"><a href=""></a>water</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<div class="sourceCode" id="cb70"><pre class="sourceCode numberSource small number-lines code-with-copy"><code class="sourceCode"><span id="cb70-1"><a href=""></a># A tibble: 300 × 7</span>
<span id="cb70-2"><a href=""></a>   river_name  site        ele       amo temperature_c  year wea   </span>
<span id="cb70-3"><a href=""></a>   &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;   &lt;dbl&gt;         &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; </span>
<span id="cb70-4"><a href=""></a> 1 Grasse      Up stream   Al     0.606         10.9    2019 snowy </span>
<span id="cb70-5"><a href=""></a> 2 Grasse      Mid stream  Al     0.425          8.68   2020 cloudy</span>
<span id="cb70-6"><a href=""></a> 3 Grase       Down stream Al     0.194          8.75   2021 cloudy</span>
<span id="cb70-7"><a href=""></a> 4 Oswegatchie Up stream   Al     1              0.791  2022 sunny </span>
<span id="cb70-8"><a href=""></a> 5 Oswegatchie Mid stream  Al     0.161          9.32   2023 snowy </span>
<span id="cb70-9"><a href=""></a> 6 Oswegatchie Down stream Al     0.0333        10.6    2019 wet   </span>
<span id="cb70-10"><a href=""></a> 7 Raquette    Up stream   Al     0.292          4.01   2020 snowy </span>
<span id="cb70-11"><a href=""></a> 8 Raquette    Mid stream  Al     0.0389         5.96   2021 sunny </span>
<span id="cb70-12"><a href=""></a> 9 Raquette    Down stream Al    NA              6.21   2022 cloudy</span>
<span id="cb70-13"><a href=""></a>10 St. Regis   Up stream   Al     0.681          8.02   2023 wet   </span>
<span id="cb70-14"><a href=""></a># ℹ 290 more rows</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p><img data-src="figures/hex_janitor.png" class="absolute" style="top: 0px; right: 0px; width: 10%; " alt="Hex logo for the janitor R package"> <!-- ![](figures/horst_janitor.png){width=57% .absolute top=20% right=-5%} --></p>
</section>
<section id="side-note-naming-conventions" class="slide level2">
<h2>Side Note: Naming conventions</h2>

<img data-src="figures/horst_case1.png" class="quarto-figure quarto-figure-center r-stretch" alt="Cartoon representations of common cases in coding. A snake screams &quot;SCREAMING_SNAKE_CASE&quot; into the face of a camel (wearing ear muffs) with &quot;camelCase&quot; written along its back. Vegetables on a skewer spell out &quot;kebab-case&quot; (words on a skewer). A mellow, happy looking snake has text &quot;snake_case&quot; along it."></section>
<section id="side-note-naming-conventions-1" class="slide level2">
<h2>Side Note: Naming conventions</h2>

<img data-src="figures/horst_case2.png" class="quarto-figure quarto-figure-center r-stretch" alt="Joke, totally made up failed programming cases. ducklingcasE (all lowercase, represented as small ducklings, until the last letter as the mama duck). BatCase (written upside down, on a bat cartoon). SH__K_CASE (shark case - screaming snake but with big chunks taken out -- a shark is below chomping on the missing AR. Lobster case: snake_case but backwards, written on a lobster carapace moving in reverse."></section>
<section id="cleaning-column-names-1" class="slide level2">
<h2>Cleaning column names</h2>
<h3 class="spacer" id="rename-is-from-dplyr"><code>rename()</code> is from <code>dplyr</code>*</h3>
<p><strong><code>rename()</code> columns</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">rename</span>(water, <span class="at">element =</span> ele, <span class="at">amount =</span> amo, <span class="at">temperature =</span> temperature_c)</span>
<span id="cb71-2"><a href=""></a>water</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 300 × 7
   river_name  site        element  amount temperature  year wea   
   &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;     &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; 
 1 Grasse      Up stream   Al       0.606       10.9    2019 snowy 
 2 Grasse      Mid stream  Al       0.425        8.68   2020 cloudy
 3 Grase       Down stream Al       0.194        8.75   2021 cloudy
 4 Oswegatchie Up stream   Al       1            0.791  2022 sunny 
 5 Oswegatchie Mid stream  Al       0.161        9.32   2023 snowy 
 6 Oswegatchie Down stream Al       0.0333      10.6    2019 wet   
 7 Raquette    Up stream   Al       0.292        4.01   2020 snowy 
 8 Raquette    Mid stream  Al       0.0389       5.96   2021 sunny 
 9 Raquette    Down stream Al      NA            6.21   2022 cloudy
10 St. Regis   Up stream   Al       0.681        8.02   2023 wet   
# ℹ 290 more rows</code></pre>
</div>
</div>
<p><img data-src="figures/hex_dplyr.png" class="absolute" style="top: 0px; right: 0px; width: 16%; " alt="Hex logo for the dplyr R package"> <span class="footnote">* part of the <code>tidyverse</code></span></p>
</section>
<section id="subsetting-columns" class="slide level2">
<h2>Subsetting columns</h2>
<h3 class="spacer" id="select-is-from-dplyr"><code>select()</code> is from <code>dplyr</code>*</h3>
<p><strong><code>select()</code> columns you want </strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">select</span>(water, river_name, site, element, amount)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img data-src="figures/hex_dplyr.png" class="absolute" style="top: 0px; right: 0px; width: 16%; " alt="Hex logo for the dplyr R package"> <span class="footnote">* part of the <code>tidyverse</code></span></p>
<div class="fragment">
<p><strong>OR, un<code>select()</code> columns you don’t want</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">select</span>(water, <span class="sc">-</span>wea)</span>
<span id="cb74-2"><a href=""></a>water</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 300 × 6
   river_name  site        element  amount temperature  year
   &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;     &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;
 1 Grasse      Up stream   Al       0.606       10.9    2019
 2 Grasse      Mid stream  Al       0.425        8.68   2020
 3 Grase       Down stream Al       0.194        8.75   2021
 4 Oswegatchie Up stream   Al       1            0.791  2022
 5 Oswegatchie Mid stream  Al       0.161        9.32   2023
 6 Oswegatchie Down stream Al       0.0333      10.6    2019
 7 Raquette    Up stream   Al       0.292        4.01   2020
 8 Raquette    Mid stream  Al       0.0389       5.96   2021
 9 Raquette    Down stream Al      NA            6.21   2022
10 St. Regis   Up stream   Al       0.681        8.02   2023
# ℹ 290 more rows</code></pre>
</div>
</div>
</div>
</section>
<section id="cleaning-columns" class="slide level2">
<h2>Cleaning columns</h2>
<h3 id="put-it-all-together">Put it all together</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/water_raw.csv"</span>)</span>
<span id="cb76-2"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">clean_names</span>(water)</span>
<span id="cb76-3"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">rename</span>(water, <span class="at">element =</span> ele, <span class="at">amount =</span> amo, <span class="at">temperature =</span> temperature_c)</span>
<span id="cb76-4"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">select</span>(water, <span class="sc">-</span>wea)</span>
<span id="cb76-5"><a href=""></a>water</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 300 × 6
   river_name  site        element  amount temperature  year
   &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;     &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;
 1 Grasse      Up stream   Al       0.606       10.9    2019
 2 Grasse      Mid stream  Al       0.425        8.68   2020
 3 Grase       Down stream Al       0.194        8.75   2021
 4 Oswegatchie Up stream   Al       1            0.791  2022
 5 Oswegatchie Mid stream  Al       0.161        9.32   2023
 6 Oswegatchie Down stream Al       0.0333      10.6    2019
 7 Raquette    Up stream   Al       0.292        4.01   2020
 8 Raquette    Mid stream  Al       0.0389       5.96   2021
 9 Raquette    Down stream Al      NA            6.21   2022
10 St. Regis   Up stream   Al       0.681        8.02   2023
# ℹ 290 more rows</code></pre>
</div>
</div>
<p><span class="note fragment absolute" style="bottom: 0px; ">Note how code repeats data frame <code>water</code>…</span></p>
</section>
<section id="fixing-typos" class="slide level2">
<h2>Fixing typos</h2>
<p>Remember the typos…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href=""></a><span class="fu">count</span>(water, river_name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 2
  river_name      n
  &lt;chr&gt;       &lt;int&gt;
1 Grase           1
2 Grasse         73
3 Oswegatchie    75
4 Raquette       74
5 St. Regis      75
6 grasse          1
7 raquette        1</code></pre>
</div>
</div>
</section>
<section id="fixing-typos-1" class="slide level2">
<h2>Fixing typos</h2>
<h3 id="replace-typos">Replace typos</h3>
<p>Combine the <code>if_else</code> function with the <code>mutate()</code> function</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">mutate</span>(water, <span class="at">river_name =</span> <span class="fu">if_else</span>(river_name <span class="sc">==</span> <span class="st">"Grase"</span>, <span class="st">"Grasse"</span>, river_name))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<h3 id="check-that-its-gone">Check that it’s gone:</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href=""></a><span class="fu">count</span>(water, river_name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  river_name      n
  &lt;chr&gt;       &lt;int&gt;
1 Grasse         74
2 Oswegatchie    75
3 Raquette       74
4 St. Regis      75
5 grasse          1
6 raquette        1</code></pre>
</div>
</div>
</section>
<section id="fixing-typos-2" class="slide level2">
<h2>Fixing typos</h2>
<h3 class="spacer" id="if_else-and-mutate-from-dplyr-package"><code>if_else()</code> and <code>mutate()</code> from <code>dplyr</code> package*</h3>
<div class="spacer">
<p><strong><code>mutate()</code></strong> creates or changes columns in a data frame:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href=""></a><span class="fu">mutate</span>(dataframe, <span class="at">column =</span> new_values)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="spacer">
<p><strong><code>if_else()</code></strong> tests for a condition, and returns one value if <code>FALSE</code> and another if <code>TRUE</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href=""></a><span class="fu">if_else</span>(condition, value_if_true, value_if_false)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p><img data-src="figures/hex_dplyr.png" class="absolute" style="top: 0px; right: 0px; width: 15%; " alt="Hex logo for the dplyr R package"> <span class="footnote">* part of the <code>tidyverse</code></span></p>
</section>
<section id="iterative-process" class="slide level2">
<h2>Iterative process</h2>
<ul>
<li>Make some corrections</li>
<li>Check the data</li>
<li>Make some more corrections (either add to or modify existing code)</li>
</ul>
<div class="fragment">
<h3 id="many-corrections">Many corrections?</h3>
<p><span class="spacer"><strong>Try <code>case_when()</code> from <code>dplyr</code> package* </strong></span></p>
<div class="spacer">
<p><strong><code>case_when()</code></strong> tests for multiple conditions, and returns different values depending</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href=""></a><span class="fu">case_when</span>(condition1 <span class="sc">~</span> value_if_true1,</span>
<span id="cb85-2"><a href=""></a>          condition2 <span class="sc">~</span> value_if_true2,</span>
<span id="cb85-3"><a href=""></a>          condition3 <span class="sc">~</span> value_if_true3,</span>
<span id="cb85-4"><a href=""></a>          <span class="cn">TRUE</span> <span class="sc">~</span> default_value)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p><img data-src="figures/hex_dplyr.png" class="absolute" style="top: 0px; right: 0px; width: 15%; " alt="Hex logo for the dplyr R package"> <span class="footnote">* part of the <code>tidyverse</code></span></p>
</div>
</section>
<section id="your-turn-fix-another-grasse-typo" class="slide level2">
<h2>Your Turn: Fix another “Grasse” typo</h2>
<ol type="1">
<li>Check the data with <code>count()</code></li>
<li>Use <code>mutate()</code> and <code>if_else()</code> to fix the typo</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb86" data-code-line-numbers="7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/water_raw.csv"</span>)</span>
<span id="cb86-2"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">clean_names</span>(water)</span>
<span id="cb86-3"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">rename</span>(water, <span class="at">element =</span> ele, <span class="at">amount =</span> amo, <span class="at">temperature =</span> temperature_c)</span>
<span id="cb86-4"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">select</span>(water, <span class="sc">-</span>wea)</span>
<span id="cb86-5"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">mutate</span>(water, <span class="at">river_name =</span> <span class="fu">if_else</span>(river_name <span class="sc">==</span> <span class="st">"Grase"</span>, <span class="st">"Grasse"</span>, river_name))</span>
<span id="cb86-6"><a href=""></a></span>
<span id="cb86-7"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">mutate</span>(???, ??? <span class="ot">=</span> ???)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span class="note absolute" style="left: 50%; bottom: 20%; "><strong>Too Easy?</strong><br>Examine and fix problems in your own data</span> <span class="note absolute" style="left: 50%; bottom: 0px; width: 60%; "><strong>OR</strong><br>Use <code>case_when()</code> to fix all the river name typos at once…</span></p>
</section>
<section id="your-turn-fix-another-grasse-typo-1" class="slide level2" data-visibility="visible">
<h2>Your Turn: Fix another “Grasse” typo</h2>
<ol type="1">
<li>Check the data with <code>count()</code></li>
<li>Use <code>mutate()</code> and <code>if_else()</code> to fix the typo</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb87" data-code-line-numbers="7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/water_raw.csv"</span>)</span>
<span id="cb87-2"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">clean_names</span>(water)</span>
<span id="cb87-3"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">rename</span>(water, <span class="at">element =</span> ele, <span class="at">amount =</span> amo, <span class="at">temperature =</span> temperature_c)</span>
<span id="cb87-4"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">select</span>(water, <span class="sc">-</span>wea)</span>
<span id="cb87-5"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">mutate</span>(water, <span class="at">river_name =</span> <span class="fu">if_else</span>(river_name <span class="sc">==</span> <span class="st">"Grase"</span>, <span class="st">"Grasse"</span>, river_name))</span>
<span id="cb87-6"><a href=""></a></span>
<span id="cb87-7"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">mutate</span>(water, <span class="at">river_name =</span> <span class="fu">if_else</span>(river_name <span class="sc">==</span> <span class="st">"grasse"</span>, <span class="st">"Grasse"</span>, river_name))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="fixing-typos-3" class="slide level2" data-visibility="visible">
<h2>Fixing typos</h2>
<h3 id="to-be-more-efficient-fix-all-typos-at-once">To be more efficient, fix all typos at once</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb88" data-code-line-numbers="5,6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/water_raw.csv"</span>)</span>
<span id="cb88-2"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">clean_names</span>(water)</span>
<span id="cb88-3"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">rename</span>(water, <span class="at">element =</span> ele, <span class="at">amount =</span> amo, <span class="at">temperature =</span> temperature_c)</span>
<span id="cb88-4"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">select</span>(water, <span class="sc">-</span>wea)</span>
<span id="cb88-5"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">mutate</span>(water, </span>
<span id="cb88-6"><a href=""></a>                 <span class="at">river_name =</span> <span class="fu">if_else</span>(river_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Grase"</span>, <span class="st">"grasse"</span>), <span class="st">"Grasse"</span>, river_name))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span class="note absolute" style="bottom: 30%; "><code>==</code> compares one item to one other<br><code>%in%</code> compares one item to many different ones</span></p>
</section>
<section id="fixing-typos-4" class="slide level2" data-visibility="visible">
<h2>Fixing typos</h2>
<h3 id="one-last-typo-to-fix">One last typo to fix</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb89" data-code-line-numbers="7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/water_raw.csv"</span>)</span>
<span id="cb89-2"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">clean_names</span>(water)</span>
<span id="cb89-3"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">rename</span>(water, <span class="at">element =</span> ele, <span class="at">amount =</span> amo, <span class="at">temperature =</span> temperature_c)</span>
<span id="cb89-4"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">select</span>(water, <span class="sc">-</span>wea)</span>
<span id="cb89-5"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">mutate</span>(water, </span>
<span id="cb89-6"><a href=""></a>                 <span class="at">river_name =</span> <span class="fu">if_else</span>(river_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Grase"</span>,<span class="st">"grasse"</span>), <span class="st">"Grasse"</span>, river_name),</span>
<span id="cb89-7"><a href=""></a>                 <span class="at">river_name =</span> <span class="fu">if_else</span>(river_name <span class="sc">==</span> <span class="st">"raquette"</span>, <span class="st">"Raquette"</span>, river_name))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<h3 id="combine-with-case_when">Combine with <code>case_when()</code></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb90" data-code-line-numbers="6-8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/water_raw.csv"</span>)</span>
<span id="cb90-2"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">clean_names</span>(water)</span>
<span id="cb90-3"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">rename</span>(water, <span class="at">element =</span> ele, <span class="at">amount =</span> amo, <span class="at">temperature =</span> temperature_c)</span>
<span id="cb90-4"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">select</span>(water, <span class="sc">-</span>wea)</span>
<span id="cb90-5"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">mutate</span>(water, </span>
<span id="cb90-6"><a href=""></a>                 <span class="at">river_name =</span> <span class="fu">case_when</span>(river_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Grase"</span>, <span class="st">"grasse"</span>) <span class="sc">~</span> <span class="st">"Grasse"</span>,</span>
<span id="cb90-7"><a href=""></a>                                        river_name <span class="sc">==</span> <span class="st">"raquette"</span> <span class="sc">~</span> <span class="st">"Raquette"</span>,</span>
<span id="cb90-8"><a href=""></a>                                        <span class="cn">TRUE</span> <span class="sc">~</span> river_name))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section></section>
<section>
<section id="tangent-tidyverse-functions" class="title-slide slide level1 center">
<h1>Tangent: <code>tidyverse</code> functions</h1>

</section>
<section id="tidyverse-functions" class="slide level2">
<h2><code>tidyverse</code> functions</h2>
<h3 id="rename-select-mutate"><code>rename()</code>, <code>select()</code>, <code>mutate()</code></h3>
<ul>
<li><code>tidyverse</code> functions always start with the <strong>data</strong>, followed by other arguments</li>
<li>you can reference any <strong>column</strong> from ‘<strong>data</strong>’</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/water_raw.csv"</span>)</span>
<span id="cb91-2"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">clean_names</span>(water)</span>
<span id="cb91-3"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">rename</span>(water, <span class="at">element =</span> ele, <span class="at">amount =</span> amo, <span class="at">temperature =</span> temperature_c)</span>
<span id="cb91-4"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">select</span>(water, <span class="sc">-</span>wea)</span>
<span id="cb91-5"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">mutate</span>(water, <span class="at">river_name =</span> <span class="fu">if_else</span>(river_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Grase"</span>, <span class="st">"grasse"</span>), <span class="st">"Grasse"</span>,  river_name))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><code>rename()</code> changes column names</li>
<li><code>select()</code> chooses columns to keep or to remove (with <code>-</code>)</li>
<li><code>mutate()</code> changes column contents</li>
</ul>
<p><img data-src="figures/hex_tidyverse.png" class="absolute" style="top: 0px; right: 0px; width: 16%; " alt="Hex logo for the tidyverse R package"></p>
</section>
<section id="why-use-tidyverse-functions" class="slide level2">
<h2>Why use <code>tidyverse</code> functions?</h2>
<h3 id="pipes-allow-you-to-string-commands-together">Pipes! <code>|&gt;</code>* Allow you to string commands together</h3>
<p>Instead of:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/water_raw.csv"</span>)</span>
<span id="cb92-2"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">clean_names</span>(water)</span>
<span id="cb92-3"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">rename</span>(water, <span class="at">element =</span> ele, <span class="at">amount =</span> amo, <span class="at">temperature =</span> temperature_c)</span>
<span id="cb92-4"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">select</span>(water, <span class="sc">-</span>wea)</span>
<span id="cb92-5"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">mutate</span>(water, </span>
<span id="cb92-6"><a href=""></a>                 <span class="at">river_name =</span> <span class="fu">case_when</span>(river_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Grase"</span>, <span class="st">"grasse"</span>) <span class="sc">~</span> <span class="st">"Grasse"</span>,</span>
<span id="cb92-7"><a href=""></a>                                        river_name <span class="sc">==</span> <span class="st">"raquette"</span> <span class="sc">~</span> <span class="st">"Raquette"</span>,</span>
<span id="cb92-8"><a href=""></a>                                        <span class="cn">TRUE</span> <span class="sc">~</span> river_name))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span class="footnote">* <code>|&gt;</code> is the base pipe, <code>%&gt;%</code> is the tidyverse pipe, you can use either</span></p>
<p><img data-src="figures/hex_tidyverse.png" class="absolute" style="top: 0px; right: 0px; width: 16%; " alt="Hex logo for the tidyverse R package"></p>
<div class="fragment">
<p>We have:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/water_raw.csv"</span>) <span class="sc">|&gt;</span></span>
<span id="cb93-2"><a href=""></a>  <span class="fu">clean_names</span>() <span class="sc">|&gt;</span></span>
<span id="cb93-3"><a href=""></a>  <span class="fu">rename</span>(<span class="at">element =</span> ele, <span class="at">amount =</span> amo, <span class="at">temperature =</span> temperature_c) <span class="sc">|&gt;</span></span>
<span id="cb93-4"><a href=""></a>  <span class="fu">select</span>(<span class="sc">-</span>wea) <span class="sc">|&gt;</span></span>
<span id="cb93-5"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">river_name =</span> <span class="fu">case_when</span>(river_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Grase"</span>, <span class="st">"grasse"</span>) <span class="sc">~</span> <span class="st">"Grasse"</span>,</span>
<span id="cb93-6"><a href=""></a>                                river_name <span class="sc">==</span> <span class="st">"raquette"</span> <span class="sc">~</span> <span class="st">"Raquette"</span>,</span>
<span id="cb93-7"><a href=""></a>                                <span class="cn">TRUE</span> <span class="sc">~</span> river_name))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="play-around" class="slide level2">
<h2>Play around</h2>
<p>Take a moment to play with this code in your console</p>
<h3 id="convert-this">Convert this:</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/water_raw.csv"</span>)</span>
<span id="cb94-2"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">clean_names</span>(water)</span>
<span id="cb94-3"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">rename</span>(water, <span class="at">element =</span> ele, <span class="at">amount =</span> amo, <span class="at">temperature =</span> temperature_c)</span>
<span id="cb94-4"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">select</span>(water, <span class="sc">-</span>wea)</span>
<span id="cb94-5"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">mutate</span>(water, </span>
<span id="cb94-6"><a href=""></a>                 <span class="at">river_name =</span> <span class="fu">case_when</span>(river_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Grase"</span>, <span class="st">"grasse"</span>) <span class="sc">~</span> <span class="st">"Grasse"</span>,</span>
<span id="cb94-7"><a href=""></a>                                        river_name <span class="sc">==</span> <span class="st">"raquette"</span> <span class="sc">~</span> <span class="st">"Raquette"</span>,</span>
<span id="cb94-8"><a href=""></a>                                        <span class="cn">TRUE</span> <span class="sc">~</span> river_name))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<h3 id="to-this">To this:</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/water_raw.csv"</span>) <span class="sc">|&gt;</span></span>
<span id="cb95-2"><a href=""></a>  <span class="fu">clean_names</span>() <span class="sc">|&gt;</span></span>
<span id="cb95-3"><a href=""></a>  <span class="fu">rename</span>(<span class="at">element =</span> ele, <span class="at">amount =</span> amo, <span class="at">temperature =</span> temperature_c) <span class="sc">|&gt;</span></span>
<span id="cb95-4"><a href=""></a>  <span class="fu">select</span>(<span class="sc">-</span>wea) <span class="sc">|&gt;</span></span>
<span id="cb95-5"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">river_name =</span> <span class="fu">case_when</span>(river_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Grase"</span>, <span class="st">"grasse"</span>) <span class="sc">~</span> <span class="st">"Grasse"</span>,</span>
<span id="cb95-6"><a href=""></a>                                river_name <span class="sc">==</span> <span class="st">"raquette"</span> <span class="sc">~</span> <span class="st">"Raquette"</span>,</span>
<span id="cb95-7"><a href=""></a>                                <span class="cn">TRUE</span> <span class="sc">~</span> river_name))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img data-src="figures/hex_tidyverse.png" class="absolute" style="top: 0px; right: 0px; width: 16%; " alt="Hex logo for the tidyverse R package"></p>
</section></section>
<section>
<section id="dealing-with-nas" class="title-slide slide level1 center">
<h1>Dealing with <code>NA</code>s</h1>
<p><span class="large">Data that <em>is</em> missing<br>Data that <em>should</em> be missing</span></p>
</section>
<section id="exploring-nas" class="slide level2">
<h2>Exploring <code>NA</code>s</h2>
<ul>
<li>We saw missing values in <code>amount</code></li>
<li>Use <code>filter()</code> to take a closer look</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href=""></a><span class="fu">filter</span>(water, <span class="fu">is.na</span>(amount))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 39 × 6
   river_name  site        element amount temperature  year
   &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;    &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;
 1 Raquette    Down stream Al          NA        6.21  2022
 2 Raquette    Up stream   Ba          NA        5.23  2022
 3 Raquette    Up stream   Br          NA      -99     2019
 4 Oswegatchie Up stream   Ca          NA        4.76  2023
 5 Raquette    Down stream Ce          NA       13.9   2020
 6 Grasse      Up stream   Cu          NA        9.13  2019
 7 Raquette    Down stream Dy          NA        4.98  2019
 8 Raquette    Down stream Er          NA        3.07  2021
 9 Raquette    Down stream Fe          NA        7.20  2023
10 Raquette    Down stream Gd          NA        4.73  2020
# ℹ 29 more rows</code></pre>
</div>
</div>
</section>
<section id="omitting-nas" class="slide level2">
<h2>Omitting <code>NA</code>s</h2>
<h3 class="spacer" id="drop_na-is-from-tidyr"><code>drop_na()</code> is from <code>tidyr</code>*</h3>
<div class="spacer">
<p>Omit <code>NA</code>s from the <code>amount</code> column only (drop those rows)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href=""></a>water_no_na <span class="ot">&lt;-</span> <span class="fu">drop_na</span>(water, amount)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Omit <strong>all</strong> <code>NA</code>s from <strong>all</strong> columns (drop those rows)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href=""></a>water_no_na <span class="ot">&lt;-</span> <span class="fu">drop_na</span>(water)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment spacer">
<p>Check…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href=""></a><span class="fu">filter</span>(water_no_na, <span class="fu">is.na</span>(amount))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 6
# ℹ 6 variables: river_name &lt;chr&gt;, site &lt;chr&gt;, element &lt;chr&gt;, amount &lt;dbl&gt;, temperature &lt;dbl&gt;, year &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href=""></a><span class="fu">nrow</span>(water_no_na)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 261</code></pre>
</div>
</div>
<p><span class="note absolute" style="bottom: -10%; ">No more <code>NA</code>s!<br>Fewer rows</span></p>
</div>
<p><span class="footnote">* part of the <code>tidyverse</code></span> <img data-src="figures/hex_tidyr.png" class="absolute" style="top: 0px; right: 0px; width: 20%; " alt="Hex logo for the tidyr R package"></p>
</section>
<section id="side-note-filter-also-omits-nas" class="slide level2">
<h2>Side Note: <code>filter()</code> also omits <code>NA</code>s 😱</h2>
<p>If we filter by the column with <code>NA</code>s, they are silently dropped</p>
<div class="small">
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href=""></a><span class="fu">filter</span>(water, amount <span class="sc">&lt;</span> <span class="fl">0.05</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15 × 6
   river_name  site        element  amount temperature  year
   &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;     &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;
 1 Oswegatchie Down stream Al      0.0333       10.6    2019
 2 Raquette    Mid stream  Al      0.0389        5.96   2021
 3 Grasse      Mid stream  Br      0.0357       12.4    2019
 4 St. Regis   Up stream   Br      0.0357        3.52   2022
 5 St. Regis   Mid stream  Br      0.0357        0.936  2023
 6 Raquette    Mid stream  Ce      0.0116        6.61   2019
 7 Raquette    Mid stream  Fe      0.00656      10.8    2022
 8 Grasse      Up stream   K       0.0313        3.61   2021
 9 Raquette    Mid stream  La      0.0275        2.50   2020
10 Oswegatchie Down stream Mn      0.00672       8.89   2019
# ℹ 5 more rows</code></pre>
</div>
</div>
</div>
<div class="small">
<p>We need to be explicit if we want to keep them</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href=""></a><span class="fu">filter</span>(water, amount <span class="sc">&lt;</span> <span class="fl">0.05</span> <span class="sc">|</span> <span class="fu">is.na</span>(amount))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 54 × 6
   river_name  site        element  amount temperature  year
   &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;     &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;
 1 Oswegatchie Down stream Al       0.0333      10.6    2019
 2 Raquette    Mid stream  Al       0.0389       5.96   2021
 3 Raquette    Down stream Al      NA            6.21   2022
 4 Raquette    Up stream   Ba      NA            5.23   2022
 5 Grasse      Mid stream  Br       0.0357      12.4    2019
 6 Raquette    Up stream   Br      NA          -99      2019
 7 St. Regis   Up stream   Br       0.0357       3.52   2022
 8 St. Regis   Mid stream  Br       0.0357       0.936  2023
 9 Oswegatchie Up stream   Ca      NA            4.76   2023
10 Raquette    Mid stream  Ce       0.0116       6.61   2019
# ℹ 44 more rows</code></pre>
</div>
</div>
</div>
</section>
<section id="replacing-nas" class="slide level2">
<h2>Replacing <code>NA</code>s</h2>
<h3 class="spacer" id="replace_na-is-from-tidyr"><code>replace_na()</code> is from <code>tidyr</code>*</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href=""></a>water_no_na <span class="ot">&lt;-</span> <span class="fu">mutate</span>(water, <span class="at">amount =</span> <span class="fu">replace_na</span>(amount, <span class="dv">0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment spacer">
<p>Check…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href=""></a><span class="fu">filter</span>(water_no_na, <span class="fu">is.na</span>(amount))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 6
# ℹ 6 variables: river_name &lt;chr&gt;, site &lt;chr&gt;, element &lt;chr&gt;, amount &lt;dbl&gt;, temperature &lt;dbl&gt;, year &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href=""></a><span class="fu">nrow</span>(water_no_na)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 300</code></pre>
</div>
</div>
<p><span class="note absolute" style="bottom: 25%; ">No more <code>NA</code>s!<br>Same number of rows</span></p>
</div>
<div class="fragment small spacer">
<p>(If you want to do a more complex replacement, you’ll have to use <code>if_else()</code> or <code>case_when()</code> like we did for typos.)</p>
</div>
<p><span class="footnote">* part of the <code>tidyverse</code></span> <img data-src="figures/hex_tidyr.png" class="absolute" style="top: 0px; right: 0px; width: 20%; " alt="Hex logo for the tidyr R package"></p>
</section>
<section id="converting-to-na" class="slide level2">
<h2>Converting <em>to</em> <code>NA</code></h2>
<p>Remember the problem with <code>temperature</code>?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href=""></a><span class="fu">filter</span>(water, temperature <span class="sc">&lt;</span> <span class="sc">-</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 6
  river_name  site       element amount temperature  year
  &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;    &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;
1 Raquette    Up stream  Br      NA             -99  2019
2 Oswegatchie Mid stream K        0.426         -99  2020
3 St. Regis   Mid stream La       0.367         -99  2023</code></pre>
</div>
</div>
<div class="fragment">
<h3 class="spacer" id="na_if-is-from-dplyr"><code>na_if()</code> is from <code>dplyr</code>*</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">mutate</span>(water, <span class="at">temperature =</span> <span class="fu">na_if</span>(temperature, <span class="sc">-</span><span class="dv">99</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img data-src="figures/hex_dplyr.png" class="absolute" style="top: 0px; right: 0px; width: 16%; " alt="Hex logo for the dplyr R package"> <span class="footnote">* part of the <code>tidyverse</code></span></p>
</div>
<div class="fragment">
<p>Check…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href=""></a><span class="fu">filter</span>(water, <span class="fu">is.na</span>(temperature))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 6
  river_name  site       element amount temperature  year
  &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;    &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;
1 Raquette    Up stream  Br      NA              NA  2019
2 Oswegatchie Mid stream K        0.426          NA  2020
3 St. Regis   Mid stream La       0.367          NA  2023</code></pre>
</div>
</div>
</div>
</section></section>
<section>
<section id="fixing-formats" class="title-slide slide level1 center">
<h1>Fixing formats</h1>

</section>
<section id="fixing-formats-1" class="slide level2">
<h2>Fixing formats</h2>
<div class="columns">
<div class="column" style="width:40%;">
<h3 id="basic-data-types">Basic data types</h3>
<ul>
<li>Text (Characters or Strings)</li>
<li>Numbers (Doubles, Integers)</li>
<li>Logical (TRUE or FALSE)</li>
<li>Factor (Categories)</li>
<li>Dates</li>
<li>Date/Times</li>
</ul>
</div><div class="column fragment" style="width:60%;">
<h3 id="look-for-problems">Look for problems</h3>
<div class="cell" data-highlight.output="3">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href=""></a>water</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 300 × 6
   river_name  site        element  amount temperature  year
   &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;     &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;
 1 Grasse      Up stream   Al       0.606       10.9    2019
 2 Grasse      Mid stream  Al       0.425        8.68   2020
 3 Grasse      Down stream Al       0.194        8.75   2021
 4 Oswegatchie Up stream   Al       1            0.791  2022
 5 Oswegatchie Mid stream  Al       0.161        9.32   2023
 6 Oswegatchie Down stream Al       0.0333      10.6    2019
 7 Raquette    Up stream   Al       0.292        4.01   2020
 8 Raquette    Mid stream  Al       0.0389       5.96   2021
 9 Raquette    Down stream Al      NA            6.21   2022
10 St. Regis   Up stream   Al       0.681        8.02   2023
# ℹ 290 more rows</code></pre>
</div>
</div>
<p><span class="note absolute" style="left: 70%; bottom: -5%; width: 40%; ">Year could be categorical (factor)<br>Better for plotting!<br><span class="small">(although it really depends)</span></span></p>
</div></div>
</section>
<section id="convert-to-categorical" class="slide level2">
<h2>Convert to categorical</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">mutate</span>(water, <span class="at">year =</span> <span class="fu">as.factor</span>(year))</span>
<span id="cb120-2"><a href=""></a>water</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 300 × 6
   river_name  site        element  amount temperature year 
   &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;     &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;
 1 Grasse      Up stream   Al       0.606       10.9   2019 
 2 Grasse      Mid stream  Al       0.425        8.68  2020 
 3 Grasse      Down stream Al       0.194        8.75  2021 
 4 Oswegatchie Up stream   Al       1            0.791 2022 
 5 Oswegatchie Mid stream  Al       0.161        9.32  2023 
 6 Oswegatchie Down stream Al       0.0333      10.6   2019 
 7 Raquette    Up stream   Al       0.292        4.01  2020 
 8 Raquette    Mid stream  Al       0.0389       5.96  2021 
 9 Raquette    Down stream Al      NA            6.21  2022 
10 St. Regis   Up stream   Al       0.681        8.02  2023 
# ℹ 290 more rows</code></pre>
</div>
</div>
</section>
<section id="changing-classes" class="slide level2">
<h2>Changing classes</h2>
<table class="caption-top">
<colgroup>
<col style="width: 31%">
<col style="width: 48%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th>Function</th>
<th>Input</th>
<th>Output</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>as.character()</code></td>
<td>Any vector</td>
<td>Text (Characters)</td>
</tr>
<tr class="even">
<td><code>as.numeric()</code></td>
<td>Any vector (but returns NAs if not numbers)</td>
<td>Numbers</td>
</tr>
<tr class="odd">
<td><code>as.logical()</code></td>
<td>TRUE, FALSE, T, F, 0 (FALSE), any other number (all TRUE)</td>
<td>TRUE or FALSE</td>
</tr>
<tr class="even">
<td><code>as.factor()</code></td>
<td>Any vector</td>
<td>Categories</td>
</tr>
</tbody>
</table>
<p><span class="note absolute" style="bottom: 20%; ">We’ll deal with dates and times later…</span></p>
</section>
<section id="put-it-all-together-1" class="slide level2">
<h2>Put it all together…</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/water_raw.csv"</span>) <span class="sc">|&gt;</span></span>
<span id="cb122-2"><a href=""></a>  <span class="fu">clean_names</span>() <span class="sc">|&gt;</span></span>
<span id="cb122-3"><a href=""></a>  <span class="fu">rename</span>(<span class="at">element =</span> ele, <span class="at">amount =</span> amo, <span class="at">temperature =</span> temperature_c) <span class="sc">|&gt;</span></span>
<span id="cb122-4"><a href=""></a>  <span class="fu">select</span>(<span class="sc">-</span>wea) <span class="sc">|&gt;</span></span>
<span id="cb122-5"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">river_name =</span> <span class="fu">case_when</span>(river_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Grase"</span>, <span class="st">"grasse"</span>) <span class="sc">~</span> <span class="st">"Grasse"</span>,</span>
<span id="cb122-6"><a href=""></a>                                river_name <span class="sc">==</span> <span class="st">"raquette"</span> <span class="sc">~</span> <span class="st">"Raquette"</span>,</span>
<span id="cb122-7"><a href=""></a>                                <span class="cn">TRUE</span> <span class="sc">~</span> river_name),</span>
<span id="cb122-8"><a href=""></a>         <span class="at">amount =</span> <span class="fu">replace_na</span>(amount, <span class="dv">0</span>),</span>
<span id="cb122-9"><a href=""></a>         <span class="at">temperature =</span> <span class="fu">na_if</span>(temperature, <span class="sc">-</span><span class="dv">99</span>),</span>
<span id="cb122-10"><a href=""></a>         <span class="at">year =</span> <span class="fu">as.factor</span>(year)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<h3 class="spacer" id="and-you-have-a-clean-corrected-data-frame-ready-to-use">And you have a clean, corrected data frame ready to use</h3>
<ul>
<li>You have not changed the original data</li>
<li>You have a <strong>reproducible</strong> record of all corrections</li>
<li>You can alter these corrections at any time</li>
<li>You have formatted your data for use in R</li>
<li>Read these steps line by line to remind yourself what you did</li>
</ul>
</section>
<section id="put-it-all-together-2" class="slide level2">
<h2>Put it all together…</h2>
<h3 id="feel-free-to-annotate-within-a-pipe">Feel free to annotate within a pipe</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href=""></a>water <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/water_raw.csv"</span>) <span class="sc">|&gt;</span></span>
<span id="cb123-2"><a href=""></a>  <span class="co"># Fix column names</span></span>
<span id="cb123-3"><a href=""></a>  <span class="fu">clean_names</span>() <span class="sc">|&gt;</span></span>
<span id="cb123-4"><a href=""></a>  <span class="fu">rename</span>(<span class="at">element =</span> ele, <span class="at">amount =</span> amo, <span class="at">temperature =</span> temperature_c) <span class="sc">|&gt;</span></span>
<span id="cb123-5"><a href=""></a>  <span class="fu">select</span>(<span class="sc">-</span>wea) <span class="sc">|&gt;</span></span>
<span id="cb123-6"><a href=""></a>  <span class="fu">mutate</span>(</span>
<span id="cb123-7"><a href=""></a>    <span class="co"># Correct typos</span></span>
<span id="cb123-8"><a href=""></a>    <span class="at">river_name =</span> <span class="fu">case_when</span>(river_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Grase"</span>, <span class="st">"grasse"</span>) <span class="sc">~</span> <span class="st">"Grasse"</span>,</span>
<span id="cb123-9"><a href=""></a>                           river_name <span class="sc">==</span> <span class="st">"raquette"</span> <span class="sc">~</span> <span class="st">"Raquette"</span>,</span>
<span id="cb123-10"><a href=""></a>                           <span class="cn">TRUE</span> <span class="sc">~</span> river_name),</span>
<span id="cb123-11"><a href=""></a>    <span class="co"># Missing amounts should be 0</span></span>
<span id="cb123-12"><a href=""></a>    <span class="at">amount =</span> <span class="fu">replace_na</span>(amount, <span class="dv">0</span>),</span>
<span id="cb123-13"><a href=""></a>    <span class="co"># Problems with temperature logger, -99 is a mistake</span></span>
<span id="cb123-14"><a href=""></a>    <span class="at">temperature =</span> <span class="fu">na_if</span>(temperature, <span class="sc">-</span><span class="dv">99</span>),</span>
<span id="cb123-15"><a href=""></a>    <span class="co"># Convert for plotting </span></span>
<span id="cb123-16"><a href=""></a>    <span class="at">year =</span> <span class="fu">as.factor</span>(year)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section>
<section>
<section id="dates-and-times" class="title-slide slide level1 center">
<h1>Dates and Times</h1>
<p><span class="large"><strong>(Or why does R hate me?)</strong></span></p>
</section>
<section id="dates-and-times-1" class="slide level2">
<h2>Dates and Times</h2>
<p><strong>Working with <a href="https://steffilazerte.ca/workshop-dealing-with-data/data/geolocators.csv">Geolocator data</a></strong></p>
<ul>
<li>Date/times aren’t always recognized as date/times</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href=""></a>geolocators <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/geolocators.csv"</span>, <span class="at">col_names =</span> <span class="fu">c</span>(<span class="st">"time"</span>, <span class="st">"light"</span>))</span>
<span id="cb124-2"><a href=""></a>geolocators</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21 × 2
  time              light
  &lt;chr&gt;             &lt;dbl&gt;
1 02/05/11 22:29:59    64
2 02/05/11 22:31:59    64
3 02/05/11 22:33:59    38
4 02/05/11 22:35:59    38
5 02/05/11 22:37:59    34
6 02/05/11 22:39:59    30
# ℹ 15 more rows</code></pre>
</div>
</div>
<blockquote>
<p>Here <code>time</code> column is considered <code>chr</code> (character/text)</p>
<p><strong>You</strong> may know it’s a date, but R does not</p>
</blockquote>
</section>
<section id="section" class="slide level2" data-menu-title="lubridate" data-background-image="figures/horst_lubridate_ymd.png" data-background-size="75%" data-background-position="top" title="Fuzzy cartoon monsters in construction hats sorting a pile of &quot;Y&quot; &quot;M&quot; and &quot;D&quot; into separate piles labeled &quot;Years&quot;, &quot;Months&quot; and &quot;Days&quot;. Title text reads &quot;Lubridate: wrangle times and dates!&quot;">
<h2></h2>
<p><span class="footnote">Artwork by <a href="https://github.com/allisonhorst/stats-illustrations"><span class="citation" data-cites="allison_horst">@allison_horst</span></a></span></p>
</section>
<section id="lubridate-package" class="slide level2">
<h2><code>lubridate</code> package*</h2>
<ul>
<li>Part of <code>tidyverse</code>, but needs to be loaded separately</li>
<li>Great for converting date/times <span class="small">(i.e.&nbsp;telling R this is a date/time)</span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href=""></a><span class="fu">library</span>(lubridate)</span>
<span id="cb126-2"><a href=""></a>geolocators <span class="ot">&lt;-</span> <span class="fu">mutate</span>(geolocators, <span class="at">time_fixed =</span> <span class="fu">dmy_hms</span>(time))</span>
<span id="cb126-3"><a href=""></a>geolocators</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21 × 3
  time              light time_fixed         
  &lt;chr&gt;             &lt;dbl&gt; &lt;dttm&gt;             
1 02/05/11 22:29:59    64 2011-05-02 22:29:59
2 02/05/11 22:31:59    64 2011-05-02 22:31:59
3 02/05/11 22:33:59    38 2011-05-02 22:33:59
4 02/05/11 22:35:59    38 2011-05-02 22:35:59
5 02/05/11 22:37:59    34 2011-05-02 22:37:59
6 02/05/11 22:39:59    30 2011-05-02 22:39:59
# ℹ 15 more rows</code></pre>
</div>
</div>
<blockquote>
<p>Now <code>time_fixed</code> column is considered <code>dttm</code> (Date/Time)</p>
<p>So <strong>You</strong> know it’s a Date/Time and now <strong>R</strong> knows too</p>
</blockquote>
<p><img data-src="figures/hex_lubridate.png" class="absolute" style="top: 0px; right: 0px; width: 16%; " alt="Hex logo for the lubridate R package"> <span class="footnote">* part of the <code>tidyverse</code></span></p>
</section>
<section id="lubridate-package-1" class="slide level2">
<h2><code>lubridate</code> package*</h2>
<p><img data-src="figures/hex_lubridate.png" class="absolute" style="top: 0px; right: 0px; width: 16%; " alt="Hex logo for the lubridate R package"></p>
<p>Generally, only the order of the <strong>y</strong>ear, <strong>m</strong>onth, <strong>d</strong>ay, <strong>h</strong>our, <strong>m</strong>inute, or <strong>s</strong>econd matters.</p>
<p><strong>For example</strong></p>
<div class="spacer">
<table class="caption-top">
<thead>
<tr class="header">
<th>date/time format</th>
<th>function</th>
<th>output class</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>2018-01-01 13:09:11</td>
<td><code>ymd_hms()</code></td>
<td>dttm (POSIXct/POSIXt)</td>
</tr>
<tr class="even">
<td>12/20/2019 10:00 PM</td>
<td><code>mdy_hm()</code></td>
<td>dttm (POSIXct/POSIXt)</td>
</tr>
<tr class="odd">
<td>31/01/2000 10 AM</td>
<td><code>dmy_h()</code></td>
<td>dttm (POSIXct/POSIXt)</td>
</tr>
<tr class="even">
<td>31-01/2000</td>
<td><code>dmy()</code></td>
<td>Date</td>
</tr>
</tbody>
</table>
</div>
<div class="spacer">
<blockquote>
<p><code>lubridate</code> is smart enough to detect AMs and PMs</p>
</blockquote>
</div>
<p><span class="footnote"><strong>Note:</strong> R <em>generally</em> requires that times have dates (<code>datetime</code>/<code>POSIXct</code>), but dates don’t have to have times (<code>Date</code>)<br> * part of the <code>tidyverse</code></span></p>
</section></section>
<section>
<section id="saving-data" class="title-slide slide level1 center">
<h1>Saving data</h1>
<p><span class="large">(For the love of all that is good don’t <em>lose</em> that data!!!)*</span></p>
<p><span class="small" style="color:grey;display:block;margin-top:60px">* but if you’ve been paying attention, you know that you only need the script 😉</span></p>
</section>
<section id="saving-data-1" class="slide level2">
<h2>Saving data</h2>
<h3 id="keep-yourself-organized-1">Keep yourself organized</h3>
<ul>
<li>Keep your R-created data in a <strong>different</strong> folder from your ‘raw’ data*</li>
<li>If you have a lot going on, split your work into several scripts, and number the both the scripts AND the data sets produced:</li>
<li><code>1_cleaned.csv</code></li>
<li><code>2_summarized.csv</code></li>
<li><code>3_graphing.csv</code></li>
</ul>
<div class="fragment">
<h3 id="save-your-data-to-file">Save your data to file:</h3>
<ul>
<li>First create the <em>datasets</em> folder</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href=""></a><span class="fu">write_csv</span>(water, <span class="st">"datasets/water_cleaned.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img data-src="figures/hex_readr.png" class="absolute" style="bottom: 12%; right: 0px; width: 16%; " alt="Hex logo for the readr R package"></p>
</div>
<p><span class="footnote">* I usually have a <code>data</code> folder and then both <code>raw</code> and <code>datasets</code> folders inside of that</span></p>
</section>
<section id="dealing-with-data-1" class="slide level2">
<h2>Dealing with data</h2>
<div class="columns">
<div class="column" style="width:50%;">
<h3 id="loading-data-2">1. Loading data</h3>
<ul>
<li>Get your data into R</li>
</ul>
<h3 id="looking-for-problems-3">2. Looking for problems</h3>
<ul>
<li>Typos</li>
<li>Incorrectly loaded data</li>
</ul>
<h3 id="fixing-problems-2">3. Fixing problems</h3>
<ul>
<li>Corrections</li>
<li>Renaming</li>
<li>Dealing with NA’s</li>
</ul>
</div><div class="column" style="width:50%;">
<h3 id="setting-formats-1">4. Setting formats</h3>
<ul>
<li>Text</li>
<li>Numbers</li>
<li>Factors</li>
<li>Dates</li>
</ul>
<h3 id="saving-your-data-1">5. Saving your data</h3>
</div></div>
</section>
<section id="wrapping-up-common-mistakes" class="slide level2">
<h2>Wrapping up: Common mistakes</h2>
<h3 id="assuming-your-data-is-in-one-format-when-its-not">Assuming your data is in one format when it’s not</h3>
<ul>
<li>Print your data to the console and use <code>skim()</code> to explore the format of your data</li>
<li>Use <code>skim()</code>, <code>count()</code>, <code>filter()</code>, <code>select()</code>, <code>ggplot()</code> to explore the content of your data</li>
</ul>
</section>
<section id="wrapping-up-common-mistakes-1" class="slide level2">
<h2>Wrapping up: Common mistakes</h2>
<h3 id="confusing-pipes-with-function-arguments">Confusing pipes with function arguments</h3>
<ul>
<li>Pipes (<code>|&gt;</code> or <code>%&gt;%</code>) pass the <em>output</em> from one function as <em>input</em> to the next function:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href=""></a>my_data <span class="ot">&lt;-</span> my_data <span class="sc">|&gt;</span>                 <span class="co"># Pass my_data</span></span>
<span id="cb129-2"><a href=""></a>  <span class="fu">filter</span>(my_column <span class="sc">&gt;</span> <span class="dv">5</span>) <span class="sc">|&gt;</span>            <span class="co"># Pass my_data, filtered</span></span>
<span id="cb129-3"><a href=""></a>  <span class="fu">select</span>(my_column, my_second_column)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Arguments may be on different lines, but all part of <em>one</em> function</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href=""></a>my_data <span class="ot">&lt;-</span> my_data <span class="sc">|&gt;</span>                  <span class="co"># Pass my_data</span></span>
<span id="cb130-2"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">my_column1 =</span> <span class="fu">if_else</span>(...),    <span class="co"># No passing (no pipes!)</span></span>
<span id="cb130-3"><a href=""></a>         <span class="at">my_column2 =</span> <span class="fu">if_else</span>(...),    <span class="co"># Instead, give 3 arguments to mutate:</span></span>
<span id="cb130-4"><a href=""></a>         <span class="at">my_column3 =</span> <span class="fu">if_else</span>(...))    <span class="co"># Arguments separated by ",", and surrounded by ( )</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="wrapping-up-further-reading" class="slide level2">
<h2>Wrapping up: Further reading</h2>
<ul>
<li>R for Data Science
<ul>
<li><a href="https://r4ds.hadley.nz/data-transform.html">Chapter 3: Data transformation</a></li>
<li><a href="https://r4ds.hadley.nz/workflow-scripts.html">Chapter 6: Workflow: scripts and projects</a></li>
<li><a href="https://r4ds.hadley.nz/strings.html">Chapter 14: Strings</a></li>
<li><a href="https://r4ds.hadley.nz/factors.html">Chapter 16: Factors</a></li>
<li><a href="https://r4ds.hadley.nz/workflow-style.html#sec-pipes">Chapter 4.3: Workflow: code style &gt; Pipes</a></li>
</ul></li>
</ul>

</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="3_loading_and_cleaning_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="3_loading_and_cleaning_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="3_loading_and_cleaning_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="3_loading_and_cleaning_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="3_loading_and_cleaning_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="3_loading_and_cleaning_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="3_loading_and_cleaning_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="3_loading_and_cleaning_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="3_loading_and_cleaning_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="3_loading_and_cleaning_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1200,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>